{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lacos/Downloads/pacelink/lib/supabaseBrowser.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr'\r\n\r\nexport function createClient() {\r\n    return createBrowserClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;AAIQ;AAJR;AAAA;;AAEO,SAAS;IACZ,OAAO,IAAA,oMAAmB;AAI9B"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lacos/Downloads/pacelink/app/workouts/%5Bid%5D/edit/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useParams, useRouter } from 'next/navigation';\nimport { createClient } from '../../../../lib/supabaseBrowser';\n\ntype DbWorkoutStatus = 'draft' | 'ready' | 'archived';\ntype DbTemplateType = 'easy_run' | 'progressive' | 'alternated';\ntype UiIntensity = 'leve' | 'moderado' | 'forte';\n\ntype Block = {\n  distance_km: number;\n  intensity: UiIntensity;\n};\n\nfunction clampNumber(n: number, min: number, max?: number) {\n  if (Number.isNaN(n)) return min;\n  if (max !== undefined) return Math.min(Math.max(n, min), max);\n  return Math.max(n, min);\n}\n\nfunction toNumber(v: unknown, fallback: number) {\n  const n = typeof v === 'number' ? v : typeof v === 'string' ? Number(v) : NaN;\n  return Number.isFinite(n) ? n : fallback;\n}\n\nfunction formatKm(n: number) {\n  const val = Number.isFinite(n) ? n : 0;\n  // evita \"12.0000001\"\n  return (Math.round(val * 10) / 10).toString().replace('.', ',');\n}\n\nfunction templateLabel(t: DbTemplateType): string {\n  switch (t) {\n    case 'easy_run':\n      return 'Rodagem';\n    case 'progressive':\n      return 'Progressivo';\n    case 'alternated':\n      return 'Alternado';\n    default:\n      return 'Treino';\n  }\n}\n\nfunction statusLabel(s: DbWorkoutStatus): string {\n  switch (s) {\n    case 'draft':\n      return 'Rascunho';\n    case 'ready':\n      return 'Pronto';\n    case 'archived':\n      return 'Arquivado';\n    default:\n      return s;\n  }\n}\n\nfunction computeTotalKm(params: {\n  includeWarmup: boolean;\n  warmupKm: number;\n  includeCooldown: boolean;\n  cooldownKm: number;\n  blocks: Block[];\n}) {\n  const warm = params.includeWarmup ? params.warmupKm : 0;\n  const cool = params.includeCooldown ? params.cooldownKm : 0;\n  const blocks = (params.blocks || []).reduce((acc, b) => acc + (Number.isFinite(b.distance_km) ? b.distance_km : 0), 0);\n  return Math.round((warm + blocks + cool) * 100) / 100;\n}\n\nfunction normalizeBlocks(raw: any): Block[] {\n  if (!Array.isArray(raw)) return [];\n  return raw\n    .map((b) => {\n      const distance =\n        toNumber(b?.distance_km, NaN) ??\n        toNumber(b?.distanceKm, NaN) ??\n        toNumber(b?.km, NaN);\n\n      const intensityRaw = (b?.intensity ?? b?.intensidade ?? '').toString().toLowerCase();\n      const intensity: UiIntensity =\n        intensityRaw === 'forte' ? 'forte' : intensityRaw === 'moderado' ? 'moderado' : 'leve';\n\n      return {\n        distance_km: Number.isFinite(distance) ? distance : 1,\n        intensity,\n      } as Block;\n    })\n    .filter((b) => Number.isFinite(b.distance_km) && b.distance_km > 0);\n}\n\nexport default function EditWorkoutPage() {\n  const router = useRouter();\n  const params = useParams<{ id: string }>();\n  const workoutId = params?.id;\n\n  const [loading, setLoading] = useState(true);\n  const [banner, setBanner] = useState<string | null>(null);\n\n  const [status, setStatus] = useState<DbWorkoutStatus>('draft');\n  const [templateType, setTemplateType] = useState<DbTemplateType>('easy_run');\n  const [title, setTitle] = useState<string>('');\n\n  const [includeWarmup, setIncludeWarmup] = useState(true);\n  const [warmupKm, setWarmupKm] = useState<number>(1);\n\n  const [includeCooldown, setIncludeCooldown] = useState(true);\n  const [cooldownKm, setCooldownKm] = useState<number>(1);\n\n  const [blocks, setBlocks] = useState<Block[]>([{ distance_km: 5, intensity: 'leve' }]);\n  const totalKm = useMemo(() => computeTotalKm({ includeWarmup, warmupKm, includeCooldown, cooldownKm, blocks }), [\n    includeWarmup,\n    warmupKm,\n    includeCooldown,\n    cooldownKm,\n    blocks,\n  ]);\n\n  useEffect(() => {\n    let alive = true;\n\n    async function load() {\n      setLoading(true);\n      setBanner(null);\n\n      try {\n        const supabase = createClient();\n\n        const { data, error } = await supabase\n          .from('workouts')\n          .select(\n            'id, status, template_type, title, include_warmup, warmup_km, include_cooldown, cooldown_km, blocks, total_km, share_slug, created_at, student_id'\n          )\n          .eq('id', workoutId)\n          .maybeSingle();\n\n        if (!alive) return;\n\n        if (error) throw error;\n        if (!data) {\n          setBanner('Treino não encontrado (ou sem permissão).');\n          setLoading(false);\n          return;\n        }\n\n        setStatus((data.status as DbWorkoutStatus) ?? 'draft');\n        setTemplateType((data.template_type as DbTemplateType) ?? 'easy_run');\n        setTitle((data.title as string) ?? '');\n\n        setIncludeWarmup(Boolean(data.include_warmup));\n        setWarmupKm(clampNumber(toNumber(data.warmup_km, 1), 0.1));\n\n        setIncludeCooldown(Boolean(data.include_cooldown));\n        setCooldownKm(clampNumber(toNumber(data.cooldown_km, 1), 0.1));\n\n        setBlocks(normalizeBlocks(data.blocks));\n      } catch (e: any) {\n        setBanner(e?.message ? `Erro ao carregar treino: ${e.message}` : 'Erro ao carregar treino.');\n      } finally {\n        if (alive) setLoading(false);\n      }\n    }\n\n    if (workoutId) load();\n    return () => {\n      alive = false;\n    };\n  }, [workoutId]);\n\n  async function saveChanges() {\n    setBanner(null);\n    try {\n      const supabase = createClient();\n\n      // constraints: warmup_km/cooldown_km precisam ser > 0, mesmo se include_* = false\n      const safeWarm = clampNumber(warmupKm, 0.1);\n      const safeCool = clampNumber(cooldownKm, 0.1);\n\n      const payload = {\n        title: title.trim() ? title.trim() : null,\n        status, // deve ser 'draft' | 'ready' | 'archived'\n        template_type: templateType, // 'easy_run' | 'progressive' | 'alternated'\n        include_warmup: includeWarmup,\n        warmup_km: safeWarm,\n        include_cooldown: includeCooldown,\n        cooldown_km: safeCool,\n        blocks,\n        total_km: computeTotalKm({\n          includeWarmup,\n          warmupKm: safeWarm,\n          includeCooldown,\n          cooldownKm: safeCool,\n          blocks,\n        }),\n      };\n\n      const { error } = await supabase.from('workouts').update(payload).eq('id', workoutId);\n      if (error) throw error;\n\n      setBanner('Alterações salvas com sucesso.');\n      setTimeout(() => setBanner(null), 1500);\n    } catch (e: any) {\n      setBanner(e?.message ? `Erro ao salvar: ${e.message}` : 'Erro ao salvar.');\n    }\n  }\n\n  async function ensureShareLinkAndCopy() {\n    setBanner(null);\n    try {\n      const supabase = createClient();\n\n      // Para gerar share_slug, o trigger roda ao atualizar status (coluna status).\n      // IMPORTANTE: status permitido pelo constraint é: 'draft' | 'ready' | 'archived'\n      const { data, error } = await supabase\n        .from('workouts')\n        .update({ status: 'ready' })\n        .eq('id', workoutId)\n        .select('id, share_slug, status')\n        .single();\n\n      if (error) throw error;\n\n      const slug = data?.share_slug;\n      if (!slug) {\n        setBanner('Não foi possível gerar o link (share_slug vazio).');\n        return;\n      }\n\n      const url = `${window.location.origin}/w/${slug}`;\n\n      try {\n        await navigator.clipboard.writeText(url);\n        setBanner('Link do aluno copiado para a área de transferência.');\n      } catch {\n        // fallback\n        window.prompt('Copie o link abaixo:', url);\n        setBanner('Link gerado. Copie manualmente.');\n      }\n    } catch (e: any) {\n      setBanner(e?.message ? `Erro ao gerar link: ${e.message}` : 'Erro ao gerar link.');\n    }\n  }\n\n  function updateBlock(idx: number, patch: Partial<Block>) {\n    setBlocks((prev) => prev.map((b, i) => (i === idx ? { ...b, ...patch } : b)));\n  }\n\n  function removeBlock(idx: number) {\n    setBlocks((prev) => prev.filter((_, i) => i !== idx));\n  }\n\n  function addBlock() {\n    setBlocks((prev) => [...prev, { distance_km: 1, intensity: 'leve' }]);\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#0b1d16] text-white\">\n      {/* Topbar local (evita dependência) */}\n      <div className=\"sticky top-0 z-10 bg-[#d7dbd9] text-[#0b1d16]\">\n        <div className=\"mx-auto flex max-w-[820px] items-center gap-3 px-4 py-3\">\n          <button\n            onClick={() => router.back()}\n            className=\"flex h-10 w-10 items-center justify-center rounded-full hover:bg-black/10\"\n            aria-label=\"Voltar\"\n            title=\"Voltar\"\n          >\n            {/* ícone seta */}\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M15 18l-6-6 6-6\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n            </svg>\n          </button>\n          <div className=\"flex-1 text-center text-lg font-semibold\">Editar Treino</div>\n\n          <button\n            onClick={ensureShareLinkAndCopy}\n            className=\"flex h-10 w-10 items-center justify-center rounded-full hover:bg-black/10\"\n            aria-label=\"Copiar link do aluno\"\n            title=\"Copiar link do aluno\"\n          >\n            {/* ícone compartilhar */}\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\n              <path\n                d=\"M16 8a3 3 0 10-2.83-4H13a3 3 0 003 3zM6 14a3 3 0 10.17 0H6zm10 6a3 3 0 10-2.83-4H13a3 3 0 003 3z\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n              <path d=\"M8.7 13.1l6.6 3.8M15.3 7.1L8.7 10.9\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n\n      <div className=\"mx-auto max-w-[820px] px-4 pb-24 pt-6\">\n        {banner ? (\n          <div className=\"mb-4 rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-red-100\">{banner}</div>\n        ) : null}\n\n        {loading ? (\n          <div className=\"opacity-80\">Carregando...</div>\n        ) : (\n          <div className=\"space-y-4\">\n            {/* Informações básicas */}\n            <div className=\"rounded-2xl bg-white/5 p-4 ring-1 ring-white/10\">\n              <div className=\"text-xs tracking-widest text-white/60\">INFORMAÇÕES BÁSICAS</div>\n\n              <div className=\"mt-3 grid grid-cols-1 gap-3 md:grid-cols-3\">\n                <div className=\"md:col-span-2\">\n                  <label className=\"mb-2 block text-sm font-semibold\">Título do treino</label>\n                  <input\n                    value={title}\n                    onChange={(e) => setTitle(e.target.value)}\n                    placeholder=\"Ex.: Rodagem leve\"\n                    className=\"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder:text-white/40 outline-none focus:border-white/25\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"mb-2 block text-sm font-semibold\">Status</label>\n                  <select\n                    value={status}\n                    onChange={(e) => setStatus(e.target.value as DbWorkoutStatus)}\n                    className=\"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white outline-none focus:border-white/25\"\n                  >\n                    <option value=\"draft\">Rascunho</option>\n                    <option value=\"ready\">Pronto</option>\n                    <option value=\"archived\">Arquivado</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"mt-4\">\n                <label className=\"mb-2 block text-sm font-semibold\">Tipo de treino</label>\n                <div className=\"flex flex-wrap gap-2\">\n                  {(['easy_run', 'progressive', 'alternated'] as DbTemplateType[]).map((t) => (\n                    <button\n                      key={t}\n                      onClick={() => setTemplateType(t)}\n                      className={[\n                        'rounded-full px-4 py-2 text-sm font-semibold ring-1 ring-white/10',\n                        templateType === t ? 'bg-[#2CEB79] text-[#0b1d16]' : 'bg-white/5 text-white/80 hover:bg-white/10',\n                      ].join(' ')}\n                    >\n                      {templateLabel(t)}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"mt-3 text-sm text-white/70\">\n                <span className=\"font-semibold\">Distância total estimada:</span> {formatKm(totalKm)} km\n              </div>\n            </div>\n\n            {/* Estrutura */}\n            <div className=\"rounded-2xl bg-white/5 p-4 ring-1 ring-white/10\">\n              <div className=\"text-lg font-semibold\">Estrutura</div>\n\n              {/* Aquecimento */}\n              <div className=\"mt-4 rounded-2xl bg-white/5 p-4 ring-1 ring-white/10\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm font-semibold\">Aquecimento</span>\n                  </div>\n\n                  <button\n                    onClick={() => setIncludeWarmup((v) => !v)}\n                    className={[\n                      'relative h-8 w-14 rounded-full ring-1 ring-white/10 transition',\n                      includeWarmup ? 'bg-[#2CEB79]' : 'bg-white/10',\n                    ].join(' ')}\n                    aria-label=\"Incluir aquecimento\"\n                    title=\"Incluir aquecimento\"\n                  >\n                    <span\n                      className={[\n                        'absolute top-1 h-6 w-6 rounded-full bg-white transition',\n                        includeWarmup ? 'left-7' : 'left-1',\n                      ].join(' ')}\n                    />\n                  </button>\n                </div>\n\n                <div className=\"mt-4 grid grid-cols-3 gap-3\">\n                  <div className=\"col-span-2\">\n                    <div className=\"text-xs tracking-widest text-white/60\">DISTÂNCIA</div>\n                    <div className=\"mt-2 flex items-center gap-2\">\n                      <input\n                        type=\"number\"\n                        step=\"0.1\"\n                        min=\"0.1\"\n                        value={warmupKm}\n                        onChange={(e) => setWarmupKm(clampNumber(Number(e.target.value), 0.1))}\n                        className=\"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white outline-none focus:border-white/25\"\n                      />\n                      <span className=\"text-white/70\">km</span>\n                    </div>\n                  </div>\n\n                  <div>\n                    <div className=\"text-xs tracking-widest text-white/60\">RITMO</div>\n                    <div className=\"mt-2 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white/80\">Livre</div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Blocos principais */}\n              <div className=\"mt-4\">\n                <div className=\"text-xs tracking-widest text-white/60\">BLOCOS PRINCIPAIS</div>\n\n                <div className=\"mt-3 space-y-3\">\n                  {blocks.map((b, idx) => (\n                    <div key={idx} className=\"rounded-2xl bg-white/5 p-4 ring-1 ring-white/10\">\n                      <div className=\"flex items-start justify-between gap-3\">\n                        <div className=\"flex-1\">\n                          <div className=\"text-xs tracking-widest text-white/60\">DISTÂNCIA DO TRECHO</div>\n                          <div className=\"mt-2 flex items-center gap-2\">\n                            <input\n                              type=\"number\"\n                              step=\"0.1\"\n                              min=\"0.1\"\n                              value={b.distance_km}\n                              onChange={(e) =>\n                                updateBlock(idx, {\n                                  distance_km: clampNumber(Number(e.target.value), 0.1),\n                                })\n                              }\n                              className=\"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white outline-none focus:border-white/25\"\n                            />\n                            <span className=\"text-white/70\">km</span>\n                          </div>\n\n                          <div className=\"mt-4 grid grid-cols-1 gap-3 md:grid-cols-2\">\n                            <div>\n                              <div className=\"text-xs tracking-widest text-white/60\">INTENSIDADE</div>\n                              <div className=\"mt-2 flex flex-wrap gap-2\">\n                                {(['leve', 'moderado', 'forte'] as UiIntensity[]).map((it) => (\n                                  <button\n                                    key={it}\n                                    onClick={() => updateBlock(idx, { intensity: it })}\n                                    className={[\n                                      'rounded-full px-4 py-2 text-sm font-semibold ring-1 ring-white/10',\n                                      b.intensity === it\n                                        ? 'bg-[#2CEB79] text-[#0b1d16]'\n                                        : 'bg-white/5 text-white/80 hover:bg-white/10',\n                                    ].join(' ')}\n                                  >\n                                    {it === 'leve' ? 'Leve' : it === 'moderado' ? 'Moderado' : 'Forte'}\n                                  </button>\n                                ))}\n                              </div>\n                            </div>\n\n                            <div className=\"flex items-end justify-end\">\n                              <button\n                                onClick={() => removeBlock(idx)}\n                                className=\"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-2 text-sm font-semibold text-red-100 hover:bg-red-500/20\"\n                                title=\"Remover bloco\"\n                              >\n                                Remover\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n\n                  <button\n                    onClick={addBlock}\n                    className=\"w-full rounded-2xl border border-dashed border-white/20 bg-white/5 px-4 py-4 text-center text-sm font-semibold text-white/80 hover:bg-white/10\"\n                  >\n                    + Adicionar bloco\n                  </button>\n                </div>\n              </div>\n\n              {/* Desaquecimento */}\n              <div className=\"mt-4 rounded-2xl bg-white/5 p-4 ring-1 ring-white/10\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"text-sm font-semibold\">Desaquecimento</div>\n\n                  <button\n                    onClick={() => setIncludeCooldown((v) => !v)}\n                    className={[\n                      'relative h-8 w-14 rounded-full ring-1 ring-white/10 transition',\n                      includeCooldown ? 'bg-[#2CEB79]' : 'bg-white/10',\n                    ].join(' ')}\n                    aria-label=\"Incluir desaquecimento\"\n                    title=\"Incluir desaquecimento\"\n                  >\n                    <span\n                      className={[\n                        'absolute top-1 h-6 w-6 rounded-full bg-white transition',\n                        includeCooldown ? 'left-7' : 'left-1',\n                      ].join(' ')}\n                    />\n                  </button>\n                </div>\n\n                <div className=\"mt-4 grid grid-cols-3 gap-3\">\n                  <div className=\"col-span-2\">\n                    <div className=\"text-xs tracking-widest text-white/60\">DISTÂNCIA</div>\n                    <div className=\"mt-2 flex items-center gap-2\">\n                      <input\n                        type=\"number\"\n                        step=\"0.1\"\n                        min=\"0.1\"\n                        value={cooldownKm}\n                        onChange={(e) => setCooldownKm(clampNumber(Number(e.target.value), 0.1))}\n                        className=\"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white outline-none focus:border-white/25\"\n                      />\n                      <span className=\"text-white/70\">km</span>\n                    </div>\n                  </div>\n\n                  <div>\n                    <div className=\"text-xs tracking-widest text-white/60\">RITMO</div>\n                    <div className=\"mt-2 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white/80\">Livre</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Ações */}\n            <div className=\"fixed bottom-0 left-0 right-0 bg-[#0b1d16]/90 backdrop-blur\">\n              <div className=\"mx-auto flex max-w-[820px] gap-3 px-4 py-4\">\n                <button\n                  onClick={saveChanges}\n                  className=\"flex-1 rounded-full bg-[#2CEB79] px-6 py-4 text-center text-base font-bold text-[#0b1d16] hover:brightness-105\"\n                >\n                  ✓ Salvar Alterações\n                </button>\n                <button\n                  onClick={ensureShareLinkAndCopy}\n                  className=\"flex-1 rounded-full bg-white/10 px-6 py-4 text-center text-base font-bold text-white hover:bg-white/15\"\n                >\n                  Copiar link do aluno\n                </button>\n              </div>\n            </div>\n\n            {/* Debug/info */}\n            <div className=\"pt-2 text-xs text-white/40\">\n              Status atual: <span className=\"font-semibold text-white/60\">{statusLabel(status)}</span>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}