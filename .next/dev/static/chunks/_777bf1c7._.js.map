{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lacos/Downloads/pacelink/components/Topbar.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface TopbarProps {\n  title: string;\n  showBack?: boolean;\n  rightAction?: React.ReactNode;\n}\n\nexport const Topbar: React.FC<TopbarProps> = ({ title, showBack = false, rightAction }) => {\n  const router = useRouter();\n\n  return (\n    <header className=\"sticky top-0 z-50 flex items-center justify-between px-4 py-4 bg-white/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-black/5 dark:border-white/5 h-16\">\n      <div className=\"flex items-center min-w-[40px]\">\n        {showBack && (\n          <button\n            onClick={() => router.back()}\n            className=\"p-2 -ml-2 rounded-full hover:bg-black/5 dark:hover:bg-white/10 text-slate-900 dark:text-white transition-colors\"\n          >\n            <span className=\"material-symbols-outlined\">arrow_back_ios_new</span>\n          </button>\n        )}\n      </div>\n\n      <h1 className=\"text-lg font-bold tracking-tight text-center flex-1 truncate px-2\">\n        {title}\n      </h1>\n\n      <div className=\"flex items-center justify-end min-w-[40px]\">{rightAction}</div>\n    </header>\n  );\n};\n\nexport default Topbar;\n"],"names":[],"mappings":";;;;;;;AAGA;;;AAHA;;AAWO,MAAM,SAAgC,CAAC,EAAE,KAAK,EAAE,WAAW,KAAK,EAAE,WAAW,EAAE;;IACpF,MAAM,SAAS,IAAA,kJAAS;IAExB,qBACE,6LAAC;QAAO,WAAU;;0BAChB,6LAAC;gBAAI,WAAU;0BACZ,0BACC,6LAAC;oBACC,SAAS,IAAM,OAAO,IAAI;oBAC1B,WAAU;8BAEV,cAAA,6LAAC;wBAAK,WAAU;kCAA4B;;;;;;;;;;;;;;;;0BAKlD,6LAAC;gBAAG,WAAU;0BACX;;;;;;0BAGH,6LAAC;gBAAI,WAAU;0BAA8C;;;;;;;;;;;;AAGnE;GAvBa;;QACI,kJAAS;;;KADb;uCAyBE"}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lacos/Downloads/pacelink/components/Button.tsx"],"sourcesContent":["\n'use client';\n\nimport React from 'react';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'ghost' | 'danger';\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n  icon?: string;\n  fullWidth?: boolean;\n}\n\nexport const Button: React.FC<ButtonProps> = ({ \n  children, \n  variant = 'primary', \n  size = 'lg', \n  icon, \n  fullWidth = true,\n  className = '',\n  ...props \n}) => {\n  const baseStyles = \"flex items-center justify-center gap-2 rounded-full font-bold transition-all active:scale-[0.98]\";\n  \n  const variants = {\n    primary: \"bg-primary text-background-dark shadow-lg shadow-primary/25 hover:bg-[#25c464]\",\n    secondary: \"bg-white dark:bg-surface-dark border border-slate-200 dark:border-white/10 text-slate-900 dark:text-white\",\n    ghost: \"bg-transparent text-slate-600 dark:text-slate-400 hover:bg-black/5 dark:hover:bg-white/5\",\n    danger: \"bg-red-500 text-white shadow-lg shadow-red-500/20\"\n  };\n\n  const sizes = {\n    sm: \"h-9 px-4 text-xs\",\n    md: \"h-11 px-6 text-sm\",\n    lg: \"h-14 px-8 text-lg\",\n    xl: \"h-16 px-10 text-xl\"\n  };\n\n  const widthClass = fullWidth ? 'w-full' : '';\n\n  return (\n    <button \n      className={`${baseStyles} ${variants[variant]} ${sizes[size]} ${widthClass} ${className}`}\n      {...props}\n    >\n      {icon && <span className=\"material-symbols-outlined\">{icon}</span>}\n      {children}\n    </button>\n  );\n};\n"],"names":[],"mappings":";;;;;AACA;;AAWO,MAAM,SAAgC,CAAC,EAC5C,QAAQ,EACR,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,IAAI,EACJ,YAAY,IAAI,EAChB,YAAY,EAAE,EACd,GAAG,OACJ;IACC,MAAM,aAAa;IAEnB,MAAM,WAAW;QACf,SAAS;QACT,WAAW;QACX,OAAO;QACP,QAAQ;IACV;IAEA,MAAM,QAAQ;QACZ,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,MAAM,aAAa,YAAY,WAAW;IAE1C,qBACE,6LAAC;QACC,WAAW,GAAG,WAAW,CAAC,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW,CAAC,EAAE,WAAW;QACxF,GAAG,KAAK;;YAER,sBAAQ,6LAAC;gBAAK,WAAU;0BAA6B;;;;;;YACrD;;;;;;;AAGP;KApCa"}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lacos/Downloads/pacelink/components/Card.tsx"],"sourcesContent":["\nimport React from 'react';\n\ninterface CardProps {\n  children: React.ReactNode;\n  className?: string;\n  onClick?: () => void;\n}\n\nexport const Card: React.FC<CardProps> = ({ children, className = '', onClick }) => {\n  return (\n    <div \n      onClick={onClick}\n      className={`bg-white dark:bg-surface-dark rounded-2xl border border-slate-200 dark:border-white/5 p-4 shadow-sm transition-all ${onClick ? 'cursor-pointer hover:border-primary/50 active:scale-[0.99]' : ''} ${className}`}\n    >\n      {children}\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;;AASO,MAAM,OAA4B,CAAC,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAE,OAAO,EAAE;IAC7E,qBACE,6LAAC;QACC,SAAS;QACT,WAAW,CAAC,mHAAmH,EAAE,UAAU,+DAA+D,GAAG,CAAC,EAAE,WAAW;kBAE1N;;;;;;AAGP;KATa"}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lacos/Downloads/pacelink/components/Input.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\n\r\ntype InputProps = React.InputHTMLAttributes<HTMLInputElement> & {\r\n  label?: string;\r\n  rightAddon?: React.ReactNode;\r\n};\r\n\r\nexport default function Input({ label, rightAddon, className = '', ...props }: InputProps) {\r\n  return (\r\n    <label className=\"block w-full\">\r\n      {label ? (\r\n        <div className=\"mb-2 text-sm font-semibold text-white/80\">{label}</div>\r\n      ) : null}\r\n\r\n      <div className=\"flex items-center gap-2 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 focus-within:ring-2 focus-within:ring-[#30e87a]/40\">\r\n        <input\r\n          {...props}\r\n          className={[\r\n            'w-full bg-transparent outline-none text-white placeholder:text-white/40',\r\n            className,\r\n          ].join(' ')}\r\n        />\r\n        {rightAddon}\r\n      </div>\r\n    </label>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AASe,SAAS,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,YAAY,EAAE,EAAE,GAAG,OAAmB;IACvF,qBACE,6LAAC;QAAM,WAAU;;YACd,sBACC,6LAAC;gBAAI,WAAU;0BAA4C;;;;;uBACzD;0BAEJ,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACE,GAAG,KAAK;wBACT,WAAW;4BACT;4BACA;yBACD,CAAC,IAAI,CAAC;;;;;;oBAER;;;;;;;;;;;;;AAIT;KAnBwB"}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lacos/Downloads/pacelink/components/Toggle.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\n\r\ntype ToggleProps = {\r\n  checked: boolean;\r\n  onChange: (checked: boolean) => void;\r\n  disabled?: boolean;\r\n};\r\n\r\nexport default function Toggle({ checked, onChange, disabled = false }: ToggleProps) {\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      disabled={disabled}\r\n      onClick={() => !disabled && onChange(!checked)}\r\n      aria-pressed={checked}\r\n      className={[\r\n        'relative inline-flex h-7 w-12 items-center rounded-full transition-colors',\r\n        checked ? 'bg-[#30e87a]' : 'bg-white/10',\r\n        disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer',\r\n      ].join(' ')}\r\n    >\r\n      <span\r\n        className={[\r\n          'inline-block h-5 w-5 transform rounded-full bg-white transition-transform',\r\n          checked ? 'translate-x-6' : 'translate-x-1',\r\n        ].join(' ')}\r\n      />\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAUe,SAAS,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,WAAW,KAAK,EAAe;IACjF,qBACE,6LAAC;QACC,MAAK;QACL,UAAU;QACV,SAAS,IAAM,CAAC,YAAY,SAAS,CAAC;QACtC,gBAAc;QACd,WAAW;YACT;YACA,UAAU,iBAAiB;YAC3B,WAAW,kCAAkC;SAC9C,CAAC,IAAI,CAAC;kBAEP,cAAA,6LAAC;YACC,WAAW;gBACT;gBACA,UAAU,kBAAkB;aAC7B,CAAC,IAAI,CAAC;;;;;;;;;;;AAIf;KArBwB"}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lacos/Downloads/pacelink/components/Icon.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\n\r\ntype IconProps = {\r\n  name: string;\r\n  className?: string;\r\n  filled?: boolean;\r\n};\r\n\r\nexport default function Icon({ name, className = '', filled = false }: IconProps) {\r\n  return (\r\n    <span\r\n      className={`material-symbols-outlined ${className}`}\r\n      style={{\r\n        fontVariationSettings: `'FILL' ${filled ? 1 : 0}`,\r\n      }}\r\n      aria-hidden=\"true\"\r\n    >\r\n      {name}\r\n    </span>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAUe,SAAS,KAAK,EAAE,IAAI,EAAE,YAAY,EAAE,EAAE,SAAS,KAAK,EAAa;IAC9E,qBACE,6LAAC;QACC,WAAW,CAAC,0BAA0B,EAAE,WAAW;QACnD,OAAO;YACL,uBAAuB,CAAC,OAAO,EAAE,SAAS,IAAI,GAAG;QACnD;QACA,eAAY;kBAEX;;;;;;AAGP;KAZwB"}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lacos/Downloads/pacelink/lib/supabaseBrowser.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr'\r\n\r\nexport function createClient() {\r\n    return createBrowserClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;AAIQ;AAJR;AAAA;;AAEO,SAAS;IACZ,OAAO,IAAA,oMAAmB;AAI9B"}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lacos/Downloads/pacelink/app/students/%5Bid%5D/workouts/new/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useParams } from 'next/navigation';\n\nimport { Topbar } from '../../../../../components/Topbar';\nimport { Button } from '../../../../../components/Button';\nimport { Card } from '../../../../../components/Card';\nimport Input from '../../../../../components/Input';\nimport Toggle from '../../../../../components/Toggle';\nimport Icon from '../../../../../components/Icon';\n\nimport createClient from '../../../../../lib/supabaseBrowser';\n\ntype WorkoutTypeUI = 'rodagem' | 'progressivo' | 'alternado';\ntype IntensityUI = 'leve' | 'moderado' | 'forte';\n\ntype StudentRow = {\n  id: string;\n  trainer_id: string;\n  name: string;\n  email: string | null;\n  p1k_sec_per_km: number | null;\n};\n\ntype BlockUI = {\n  id: string;\n  distanceKm: string; // string para permitir apagar/editar livremente\n  intensity: IntensityUI;\n};\n\nfunction makeId() {\n  // Evita depender de crypto.randomUUID em ambientes antigos\n  return `${Date.now()}_${Math.random().toString(16).slice(2)}`;\n}\n\nfunction generateShareSlug() {\n  // slug curto para URL, sem caracteres especiais\n  return `${Math.random().toString(36).slice(2, 10)}${Date.now().toString(36).slice(-4)}`;\n}\n\nfunction onlyDecimalChars(input: string) {\n  // permite digitar \"2\", \"2.\", \"2,5\"\n  return input.replace(/[^\\d.,]/g, '');\n}\n\nfunction parsePtDecimal(input: string): number | null {\n  const cleaned = input.trim().replace(',', '.');\n  if (!cleaned) return null;\n  const n = Number(cleaned);\n  if (Number.isNaN(n)) return null;\n  return n;\n}\n\nfunction formatKm(n: number) {\n  if (!Number.isFinite(n)) return '0';\n  const s = n.toFixed(1);\n  return s.endsWith('.0') ? String(Math.round(n)) : s;\n}\n\nfunction formatPaceFromSec(secPerKm: number | null | undefined) {\n  if (!secPerKm || secPerKm <= 0) return '—';\n  const min = Math.floor(secPerKm / 60);\n  const sec = secPerKm % 60;\n  return `${min}:${String(sec).padStart(2, '0')}`;\n}\n\n/**\n * Alguns ambientes têm CHECK CONSTRAINT em `workouts.template_type` e/ou `workouts.status`.\n * Para não “quebrar” nada do que já funciona, tentamos inserir com valores em PT\n * e, se der erro de constraint, tentamos variações comuns (EN/Title Case/UPPER).\n */\nfunction templateTypeCandidates(ui: WorkoutTypeUI): string[] {\n  const pt = ui; // rodagem/progressivo/alternado\n\n  const ptTitle =\n    ui === 'rodagem' ? 'Rodagem' : ui === 'progressivo' ? 'Progressivo' : 'Alternado';\n\n  const en =\n    ui === 'rodagem' ? 'easy' : ui === 'progressivo' ? 'progressive' : 'interval';\n\n  const enUpper = en.toUpperCase();\n  const ptUpper = pt.toUpperCase();\n\n  return Array.from(new Set([pt, ptTitle, ptUpper, en, enUpper]));\n}\n\nfunction statusCandidates(): string[] {\n  return Array.from(new Set(['draft', 'rascunho', 'DRAFT', 'RASCUNHO']));\n}\n\nexport default function NewWorkoutPage() {\n  const params = useParams();\n\n  const studentId = useMemo(() => {\n    const raw = (params as any)?.id;\n    if (Array.isArray(raw)) return raw[0] ?? '';\n    return raw ?? '';\n  }, [params]);\n\n  const supabase = useMemo(() => createClient(), []);\n\n  const [trainerId, setTrainerId] = useState<string>('');\n  const [student, setStudent] = useState<StudentRow | null>(null);\n\n  const [loading, setLoading] = useState<boolean>(true);\n  const [saving, setSaving] = useState<boolean>(false);\n  const [error, setError] = useState<string>('');\n\n  // Form states\n  const [title, setTitle] = useState<string>('');\n  const [workoutType, setWorkoutType] = useState<WorkoutTypeUI>('rodagem');\n\n  const [includeWarmup, setIncludeWarmup] = useState<boolean>(true);\n  const [warmupKm, setWarmupKm] = useState<string>('2');\n\n  const [includeCooldown, setIncludeCooldown] = useState<boolean>(false);\n  const [cooldownKm, setCooldownKm] = useState<string>('1');\n\n  const [blocks, setBlocks] = useState<BlockUI[]>([\n    { id: makeId(), distanceKm: '5', intensity: 'moderado' },\n  ]);\n\n  const titlePlaceholder = useMemo(() => {\n    if (workoutType === 'rodagem') return 'Ex.: Rodagem leve';\n    if (workoutType === 'progressivo') return 'Ex.: Progressivo';\n    return 'Ex.: Alternado';\n  }, [workoutType]);\n\n  const totalKm = useMemo(() => {\n    const warm = includeWarmup ? (parsePtDecimal(warmupKm) ?? 0) : 0;\n    const cool = includeCooldown ? (parsePtDecimal(cooldownKm) ?? 0) : 0;\n    const main = blocks.reduce((acc, b) => acc + (parsePtDecimal(b.distanceKm) ?? 0), 0);\n    return warm + main + cool;\n  }, [includeWarmup, warmupKm, includeCooldown, cooldownKm, blocks]);\n\n  useEffect(() => {\n    let cancelled = false;\n\n    async function init() {\n      setLoading(true);\n      setError('');\n\n      try {\n        // 1) Verifica sessão\n        const { data: userData, error: userErr } = await supabase.auth.getUser();\n        if (userErr) throw userErr;\n        const user = userData?.user;\n        if (!user) {\n          throw new Error('Sessão expirada. Faça login novamente.');\n        }\n        if (cancelled) return;\n        setTrainerId(user.id);\n\n        // 2) Carrega aluno (NUNCA usar .single() aqui para evitar 406)\n        const { data: rows, error: stErr } = await supabase\n          .from('students')\n          .select('id, trainer_id, name, email, p1k_sec_per_km')\n          .eq('id', studentId)\n          .limit(1);\n\n        if (stErr) throw stErr;\n\n        const row = Array.isArray(rows) ? rows[0] : null;\n        if (!row) {\n          throw new Error('Aluno não encontrado (ou sem permissão para acessar).');\n        }\n        if (row.trainer_id !== user.id) {\n          throw new Error('Você não tem permissão para acessar este aluno.');\n        }\n\n        if (cancelled) return;\n        setStudent(row as StudentRow);\n      } catch (e: any) {\n        if (cancelled) return;\n        setStudent(null);\n        setError(e?.message ?? 'Erro ao carregar dados.');\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n\n    if (studentId) init();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [studentId, supabase]);\n\n  function updateBlock(id: string, patch: Partial<BlockUI>) {\n    setBlocks((prev) => prev.map((b) => (b.id === id ? { ...b, ...patch } : b)));\n  }\n\n  function addBlock() {\n    setBlocks((prev) => [\n      ...prev,\n      { id: makeId(), distanceKm: '1', intensity: 'moderado' },\n    ]);\n  }\n\n  function removeBlock(id: string) {\n    setBlocks((prev) => prev.filter((b) => b.id !== id));\n  }\n\n  function validateForm(): string | null {\n    if (!student) return 'Aluno não carregado.';\n    if (!trainerId) return 'Sessão expirada. Faça login novamente.';\n\n    if (includeWarmup) {\n      const n = parsePtDecimal(warmupKm);\n      if (n === null) return 'Informe a distância do aquecimento.';\n      if (n < 0) return 'A distância do aquecimento não pode ser negativa.';\n    }\n\n    if (includeCooldown) {\n      const n = parsePtDecimal(cooldownKm);\n      if (n === null) return 'Informe a distância do desaquecimento.';\n      if (n < 0) return 'A distância do desaquecimento não pode ser negativa.';\n    }\n\n    if (!blocks.length) return 'Adicione pelo menos 1 bloco principal.';\n\n    for (const b of blocks) {\n      const n = parsePtDecimal(b.distanceKm);\n      if (n === null) return 'Preencha a distância de todos os blocos.';\n      if (n <= 0) return 'A distância do bloco deve ser maior que 0.';\n    }\n\n    return null;\n  }\n\n  async function insertWorkoutWithFallbacks(basePayload: any) {\n    let lastError: any = null;\n\n    for (const status of statusCandidates()) {\n      for (const template_type of templateTypeCandidates(workoutType)) {\n        const payload = { ...basePayload, status, template_type };\n\n        const { data, error: insErr } = await supabase\n          .from('workouts')\n          .insert(payload)\n          .select('id, share_slug');\n\n        if (!insErr) {\n          const row = Array.isArray(data) ? data[0] : (data as any);\n          if (!row?.id) throw new Error('Treino salvo, mas não retornou o ID.');\n          return row;\n        }\n\n        lastError = insErr;\n\n        // Se não for constraint de status/template_type, não faz sentido insistir em fallback\n        const msg = String(insErr?.message ?? '');\n        const code = String(insErr?.code ?? '');\n        const constraintHint =\n          msg.includes('workouts_template_type_check') ||\n          msg.includes('workouts_status_check') ||\n          code === '23514';\n\n        if (!constraintHint) {\n          throw insErr;\n        }\n      }\n    }\n\n    throw lastError ?? new Error('Falha ao salvar treino.');\n  }\n\n  function blocksPayload() {\n    return blocks.map((b) => ({\n      distance_km: parsePtDecimal(b.distanceKm) ?? 0,\n      intensity: b.intensity,\n    }));\n  }\n\n  function computeTotalKm(warm: number, cool: number, bl: any[]) {\n    return warm + cool + bl.reduce((acc: number, b: any) => acc + (b.distance_km ?? 0), 0);\n  }\n\n  async function handleSaveDraft() {\n    setError('');\n\n    const validationError = validateForm();\n    if (validationError) {\n      setError(validationError);\n      return;\n    }\n\n    if (!student) return;\n\n    setSaving(true);\n    try {\n      const warm = includeWarmup ? parsePtDecimal(warmupKm) ?? 0 : 0;\n      const cool = includeCooldown ? parsePtDecimal(cooldownKm) ?? 0 : 0;\n      const bl = blocksPayload();\n\n      const payload = {\n        student_id: student.id,\n        trainer_id: trainerId,\n        status: 'draft', // será ajustado no fallback se existir check constraint\n        template_type: workoutType, // será ajustado no fallback se existir check constraint\n        include_warmup: includeWarmup,\n        warmup_km: warm,\n        include_cooldown: includeCooldown,\n        cooldown_km: cool,\n        template_params: { ui_workout_type: workoutType },\n        blocks: bl,\n        total_km: computeTotalKm(warm, cool, bl),\n        version: 1,\n      };\n\n      await insertWorkoutWithFallbacks(payload);\n      setError('');\n    } catch (e: any) {\n      setError(e?.message ?? 'Erro ao salvar rascunho.');\n    } finally {\n      setSaving(false);\n    }\n  }\n\n  async function handleShare() {\n    setError('');\n\n    const validationError = validateForm();\n    if (validationError) {\n      setError(validationError);\n      return;\n    }\n\n    setSaving(true);\n    try {\n      const warm = includeWarmup ? parsePtDecimal(warmupKm) ?? 0 : 0;\n      const cool = includeCooldown ? parsePtDecimal(cooldownKm) ?? 0 : 0;\n      const bl = blocksPayload();\n\n      const basePayload = {\n        student_id: student?.id,\n        share_slug: generateShareSlug(),\n        trainer_id: trainerId,\n        status: 'draft',\n        template_type: workoutType,\n        include_warmup: includeWarmup,\n        warmup_km: warm,\n        include_cooldown: includeCooldown,\n        cooldown_km: cool,\n        template_params: { ui_workout_type: workoutType },\n        blocks: bl,\n        total_km: computeTotalKm(warm, cool, bl),\n        version: 1,\n      };\n\n      const row = await insertWorkoutWithFallbacks(basePayload);\n      const slug = row?.share_slug;\n\n      if (!slug) {\n        setError(\n          'Treino salvo, mas não foi gerado um link de compartilhamento. Verifique se existe trigger/coluna share_slug no banco.'\n        );\n        return;\n      }\n\n      const url = `${window.location.origin}/w/${slug}`;\n\n      // Web Share API (mobile)\n      if ((navigator as any)?.share) {\n        await (navigator as any).share({\n          title: 'PaceLink - Treino',\n          text: 'Treino criado no PaceLink',\n          url,\n        });\n        return;\n      }\n\n      // Fallback: copia e abre\n      try {\n        await navigator.clipboard.writeText(url);\n      } catch {\n        // ignore\n      }\n      window.open(url, '_blank', 'noopener,noreferrer');\n    } catch (e: any) {\n      setError(e?.message ?? 'Erro ao compartilhar.');\n    } finally {\n      setSaving(false);\n    }\n  }\n\n  return (\n    <div className=\"flex-1 flex flex-col bg-background-light dark:bg-background-dark\">\n      {/* P0: voltar no Topbar (mesmo padrão da tela Perfil do Aluno) */}\n      <Topbar title=\"Criar Treino\" showBack />\n\n      <div className=\"max-w-xl w-full mx-auto px-4 pb-28 pt-4 space-y-4\">\n        {error ? (\n          <div className=\"rounded-xl border border-red-500/40 bg-red-500/10 text-red-200 px-4 py-3\">\n            {error}\n          </div>\n        ) : null}\n\n        <Card>\n          <div className=\"text-xs uppercase tracking-wider text-white/60\">Aluno</div>\n          <div className=\"text-xl font-semibold mt-1\">\n            {loading ? 'Carregando…' : student?.name ?? '—'}\n          </div>\n          <div className=\"text-sm text-white/70 mt-1\">\n            Ritmo P1K: {formatPaceFromSec(student?.p1k_sec_per_km)} min/km\n          </div>\n        </Card>\n\n        <Card>\n          <div className=\"text-lg font-semibold\">Título do treino</div>\n          <div className=\"mt-3\">\n            {/* P0: não preencher automaticamente com o tipo; usar apenas placeholder */}\n            <Input\n              value={title}\n              onChange={(e: any) => setTitle(String(e.target.value ?? ''))}\n              placeholder={titlePlaceholder}\n              type=\"text\"\n            />\n          </div>\n          <div className=\"text-sm text-white/60 mt-2\">\n            Distância total estimada: {formatKm(totalKm)} km\n          </div>\n        </Card>\n\n        <Card>\n          <div className=\"text-lg font-semibold\">Tipo de Treino</div>\n\n          <div className=\"mt-3 flex gap-2\">\n            <button\n              type=\"button\"\n              onClick={() => setWorkoutType('rodagem')}\n              className={`px-4 py-2 rounded-full border text-sm font-semibold ${\n                workoutType === 'rodagem'\n                  ? 'bg-primary text-black border-transparent'\n                  : 'bg-transparent text-white/80 border-white/20'\n              }`}\n            >\n              Rodagem\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => setWorkoutType('progressivo')}\n              className={`px-4 py-2 rounded-full border text-sm font-semibold ${\n                workoutType === 'progressivo'\n                  ? 'bg-primary text-black border-transparent'\n                  : 'bg-transparent text-white/80 border-white/20'\n              }`}\n            >\n              Progressivo\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => setWorkoutType('alternado')}\n              className={`px-4 py-2 rounded-full border text-sm font-semibold ${\n                workoutType === 'alternado'\n                  ? 'bg-primary text-black border-transparent'\n                  : 'bg-transparent text-white/80 border-white/20'\n              }`}\n            >\n              Alternado\n            </button>\n          </div>\n        </Card>\n\n        <Card>\n          <div className=\"text-lg font-semibold\">Estrutura</div>\n\n          <div className=\"mt-4 flex items-center justify-between\">\n            <div className=\"font-semibold\">Aquecimento</div>\n            <Toggle checked={includeWarmup} onCheckedChange={setIncludeWarmup as any} />\n          </div>\n\n          {includeWarmup ? (\n            <div className=\"mt-3 grid grid-cols-[1fr_auto] gap-2 items-end\">\n              <div>\n                <div className=\"text-xs uppercase tracking-wider text-white/60\">Distância</div>\n                {/* P0: input destravado (string) */}\n                <Input\n                  value={warmupKm}\n                  onChange={(e: any) => setWarmupKm(onlyDecimalChars(String(e.target.value ?? '')))}\n                  onBlur={() => {\n                    const n = parsePtDecimal(warmupKm);\n                    if (n === null) return;\n                    setWarmupKm(String(n));\n                  }}\n                  inputMode=\"decimal\"\n                  placeholder=\"2\"\n                  type=\"text\"\n                />\n              </div>\n              <div className=\"text-white/70 pb-2\">km</div>\n            </div>\n          ) : null}\n\n          <div className=\"mt-6 flex items-center justify-between\">\n            <div className=\"font-semibold\">Desaquecimento</div>\n            <Toggle checked={includeCooldown} onCheckedChange={setIncludeCooldown as any} />\n          </div>\n\n          {includeCooldown ? (\n            <div className=\"mt-3 grid grid-cols-[1fr_auto] gap-2 items-end\">\n              <div>\n                <div className=\"text-xs uppercase tracking-wider text-white/60\">Distância</div>\n                {/* P0: input destravado (string) */}\n                <Input\n                  value={cooldownKm}\n                  onChange={(e: any) =>\n                    setCooldownKm(onlyDecimalChars(String(e.target.value ?? '')))\n                  }\n                  onBlur={() => {\n                    const n = parsePtDecimal(cooldownKm);\n                    if (n === null) return;\n                    setCooldownKm(String(n));\n                  }}\n                  inputMode=\"decimal\"\n                  placeholder=\"1\"\n                  type=\"text\"\n                />\n              </div>\n              <div className=\"text-white/70 pb-2\">km</div>\n            </div>\n          ) : null}\n        </Card>\n\n        <Card>\n          {/* P0: opção de adicionar blocos */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-lg font-semibold\">Blocos Principais</div>\n            <Button variant=\"secondary\" onClick={addBlock}>\n              + Adicionar bloco\n            </Button>\n          </div>\n\n          <div className=\"mt-4 space-y-4\">\n            {blocks.map((b, idx) => (\n              <div key={b.id} className=\"rounded-2xl border border-white/10 p-4\">\n                <div className=\"flex items-start justify-between gap-3\">\n                  <div className=\"text-sm font-semibold text-white/80\">Bloco {idx + 1}</div>\n                  {blocks.length > 1 ? (\n                    <button\n                      type=\"button\"\n                      onClick={() => removeBlock(b.id)}\n                      className=\"text-white/60 hover:text-white text-sm\"\n                      aria-label=\"Remover bloco\"\n                      title=\"Remover bloco\"\n                    >\n                      Remover\n                    </button>\n                  ) : null}\n                </div>\n\n                <div className=\"mt-3 grid grid-cols-[1fr_auto] gap-2 items-end\">\n                  <div>\n                    <div className=\"text-xs uppercase tracking-wider text-white/60\">\n                      Distância do trecho\n                    </div>\n                    {/* P0: input destravado (string) */}\n                    <Input\n                      value={b.distanceKm}\n                      onChange={(e: any) =>\n                        updateBlock(b.id, {\n                          distanceKm: onlyDecimalChars(String(e.target.value ?? '')),\n                        })\n                      }\n                      onBlur={() => {\n                        const n = parsePtDecimal(b.distanceKm);\n                        if (n === null) return;\n                        updateBlock(b.id, { distanceKm: String(n) });\n                      }}\n                      inputMode=\"decimal\"\n                      placeholder=\"1\"\n                      type=\"text\"\n                    />\n                  </div>\n                  <div className=\"text-white/70 pb-2\">km</div>\n                </div>\n\n                <div className=\"mt-4\">\n                  <div className=\"text-xs uppercase tracking-wider text-white/60 mb-2\">\n                    Intensidade\n                  </div>\n\n                  {/* P1: grid para não cortar \"Forte\" no celular */}\n                  <div className=\"grid grid-cols-3 gap-2\">\n                    {(['leve', 'moderado', 'forte'] as IntensityUI[]).map((opt) => (\n                      <button\n                        key={opt}\n                        type=\"button\"\n                        onClick={() => updateBlock(b.id, { intensity: opt })}\n                        className={`px-3 py-2 rounded-full border text-sm font-semibold ${\n                          b.intensity === opt\n                            ? 'bg-primary text-black border-transparent'\n                            : 'bg-transparent text-white/80 border-white/20'\n                        }`}\n                      >\n                        {opt === 'leve' ? 'Leve' : opt === 'moderado' ? 'Moderado' : 'Forte'}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </Card>\n      </div>\n\n      {/* Bottom actions */}\n      <div className=\"fixed bottom-0 left-0 right-0 p-4 bg-black/30 backdrop-blur border-t border-white/10\">\n        <div className=\"max-w-xl w-full mx-auto grid grid-cols-2 gap-3\">\n          {/* P0: salvar rascunho sem estourar constraint (fallback de template_type/status) */}\n          <Button variant=\"secondary\" onClick={handleSaveDraft} disabled={saving || loading}>\n            Salvar Rascunho\n          </Button>\n\n          <Button onClick={handleShare} disabled={saving || loading}>\n            <span className=\"inline-flex items-center gap-2\">\n              <Icon name=\"share\" size={18} />\n              Compartilhar\n            </span>\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}