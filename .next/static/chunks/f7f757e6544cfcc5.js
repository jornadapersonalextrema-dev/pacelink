(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},46852,e=>{"use strict";var t=e.i(43476);let a=({title:e="PaceLink",showBack:a=!1,onBack:s,rightSlot:l,action:r,className:i=""})=>(0,t.jsx)("div",{className:`w-full bg-[#d1d1d1] ${i}`,children:(0,t.jsxs)("div",{className:"mx-auto max-w-2xl flex items-center justify-between px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[a?(0,t.jsx)("button",{type:"button",onClick:s,"aria-label":"Voltar",className:"text-white/90 hover:text-white",children:(0,t.jsx)("span",{className:"text-2xl leading-none",children:"‹"})}):null,(0,t.jsx)("div",{className:"text-white text-xl font-semibold truncate",children:e})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:l??r??null})]})});e.s(["Topbar",0,a,"default",0,a])},48978,e=>{"use strict";var t=e.i(43476);let a=({children:e,variant:a="primary",size:s="lg",icon:l,fullWidth:r=!0,className:i="",...n})=>(0,t.jsxs)("button",{className:`flex items-center justify-center gap-2 rounded-full font-bold transition-all active:scale-[0.98] ${{primary:"bg-primary text-background-dark shadow-lg shadow-primary/25 hover:bg-[#25c464]",secondary:"bg-white dark:bg-surface-dark border border-slate-200 dark:border-white/10 text-slate-900 dark:text-white",ghost:"bg-transparent text-slate-600 dark:text-slate-400 hover:bg-black/5 dark:hover:bg-white/5",danger:"bg-red-500 text-white shadow-lg shadow-red-500/20"}[a]} ${{sm:"h-9 px-4 text-xs",md:"h-11 px-6 text-sm",lg:"h-14 px-8 text-lg",xl:"h-16 px-10 text-xl"}[s]} ${r?"w-full":""} ${i}`,...n,children:[l&&(0,t.jsx)("span",{className:"material-symbols-outlined",children:l}),e]});e.s(["Button",0,a,"default",0,a])},80334,e=>{"use strict";var t=e.i(43476);e.s(["Card",0,({children:e,className:a="",onClick:s})=>(0,t.jsx)("div",{onClick:s,className:`bg-white dark:bg-surface-dark rounded-2xl border border-slate-200 dark:border-white/5 p-4 shadow-sm transition-all ${s?"cursor-pointer hover:border-primary/50 active:scale-[0.99]":""} ${a}`,children:e})])},6556,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),l=e.i(27972),r=e.i(46852),i=e.i(80334),n=e.i(48978);function d(){let e=(0,s.useRouter)(),d=(0,a.useMemo)(()=>(0,l.createClient)(),[]),[c,o]=(0,a.useState)(!0),[m,u]=(0,a.useState)(null),[x,h]=(0,a.useState)([]),[b,p]=(0,a.useState)(null),[f,g]=(0,a.useState)(!1),[j,k]=(0,a.useState)(""),[v,N]=(0,a.useState)(""),[w,y]=(0,a.useState)("5:00"),[_,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{o(!0),p(null);let{data:t,error:a}=await d.auth.getUser();if(a){p(a.message),o(!1);return}t.user?(u(t.user.id),o(!1)):e.replace("/login")})()},[e,d]),(0,a.useEffect)(()=>{(async()=>{if(!m)return;p(null);let{data:e,error:t}=await d.from("students").select("id, trainer_id, name, email, p1k_sec_per_km, created_at, updated_at").eq("trainer_id",m).order("created_at",{ascending:!1});t?p(t.message):h(e||[])})()},[m,d]);let S=async()=>{if(!m)return;let t=function(e){let t=(e||"").trim().replace(",",":").replace(".",":").match(/^(\d{1,2}):(\d{2})$/);if(!t)return null;let a=Number(t[1]),s=Number(t[2]);if(!Number.isFinite(a)||!Number.isFinite(s)||s>=60)return null;let l=60*a+s;return l<120||l>1200?null:l}(w);if(!j.trim())return void p("Informe o nome do aluno.");if(null==t)return void p("P1k inválido. Use o formato mm:ss (ex.: 4:30).");C(!0),p(null);try{let a={trainer_id:m,name:j.trim(),email:v.trim()?v.trim():null,p1k_sec_per_km:t},{data:s,error:l}=await d.from("students").insert([a]).select("id").single();if(l)throw l;g(!1),k(""),N(""),y("5:00"),e.push(`/students/${s.id}`)}catch(e){p(e?.message||"Erro ao criar aluno.")}finally{C(!1)}};return(0,t.jsxs)("div",{className:"flex-1 flex flex-col bg-background-light dark:bg-background-dark",children:[(0,t.jsx)(r.Topbar,{title:"Alunos"}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto no-scrollbar pb-28",children:(0,t.jsxs)("div",{className:"px-5 pt-6",children:[b&&(0,t.jsx)("div",{className:"rounded-xl bg-red-50 dark:bg-red-900/20 p-4 text-sm text-red-600 dark:text-red-300 mb-4",children:b}),c?(0,t.jsx)(i.Card,{className:"p-4",children:"Carregando..."}):(0,t.jsx)(t.Fragment,{children:0===x.length?(0,t.jsxs)(i.Card,{className:"p-5 text-sm text-slate-500",children:["Nenhum aluno cadastrado ainda. Toque em ",(0,t.jsx)("b",{children:"Novo Aluno"})," para começar."]}):(0,t.jsx)("div",{className:"space-y-4",children:x.map(a=>(0,t.jsxs)(i.Card,{className:"p-4 flex items-center justify-between cursor-pointer",onClick:()=>e.push(`/students/${a.id}`),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-bold text-base",children:a.name}),(0,t.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["P1k: ",(0,t.jsx)("span",{className:"text-primary font-bold",children:function(e){if(null==e)return"--:--";let t=Math.floor(e/60);return`${t}:${String(e%60).padStart(2,"0")}`}(a.p1k_sec_per_km)})," min/km",a.email?(0,t.jsxs)("span",{className:"text-slate-400",children:[" • ",a.email]}):null]})]}),(0,t.jsx)("span",{className:"material-symbols-outlined text-slate-400",children:"chevron_right"})]},a.id))})})]})}),(0,t.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-background-light dark:from-background-dark via-background-light/95 to-transparent",children:(0,t.jsx)("div",{className:"max-w-md mx-auto",children:(0,t.jsx)(n.Button,{onClick:()=>g(!0),icon:"person_add",children:"Novo Aluno"})})}),f&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/50 p-4",children:(0,t.jsxs)(i.Card,{className:"w-full max-w-md p-5",children:[(0,t.jsx)("div",{className:"text-lg font-black mb-4",children:"Novo Aluno"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-300 mb-1",children:"Nome"}),(0,t.jsx)("input",{value:j,onChange:e=>k(e.target.value),className:"w-full rounded-xl bg-surface-dark border border-white/10 px-4 py-3 text-white outline-none",placeholder:"Ex.: Marcio Automatik"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-300 mb-1",children:"Email (opcional)"}),(0,t.jsx)("input",{value:v,onChange:e=>N(e.target.value),className:"w-full rounded-xl bg-surface-dark border border-white/10 px-4 py-3 text-white outline-none",placeholder:"aluno@email.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-300 mb-1",children:"P1k (mm:ss / km)"}),(0,t.jsx)("input",{value:w,onChange:e=>y(e.target.value),className:"w-full rounded-xl bg-surface-dark border border-white/10 px-4 py-3 text-white outline-none",placeholder:"Ex.: 4:30"}),(0,t.jsxs)("div",{className:"text-[11px] text-slate-400 mt-1",children:["Será salvo como ",(0,t.jsx)("b",{children:"segundos por km"})," em ",(0,t.jsx)("code",{children:"p1k_sec_per_km"}),"."]})]})]}),(0,t.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,t.jsx)(n.Button,{onClick:S,disabled:_,children:_?"Salvando...":"Salvar"}),(0,t.jsx)("button",{className:"w-full text-center text-slate-400 font-bold py-2",onClick:()=>g(!1),children:"Cancelar"})]})]})})]})}e.s(["default",()=>d])}]);