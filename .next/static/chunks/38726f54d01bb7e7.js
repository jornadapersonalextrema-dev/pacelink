(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},48978,e=>{"use strict";var t=e.i(43476);e.s(["Button",0,({children:e,variant:a="primary",size:s="lg",icon:r,fullWidth:i=!0,className:l="",...n})=>(0,t.jsxs)("button",{className:`flex items-center justify-center gap-2 rounded-full font-bold transition-all active:scale-[0.98] ${{primary:"bg-primary text-background-dark shadow-lg shadow-primary/25 hover:bg-[#25c464]",secondary:"bg-white dark:bg-surface-dark border border-slate-200 dark:border-white/10 text-slate-900 dark:text-white",ghost:"bg-transparent text-slate-600 dark:text-slate-400 hover:bg-black/5 dark:hover:bg-white/5",danger:"bg-red-500 text-white shadow-lg shadow-red-500/20"}[a]} ${{sm:"h-9 px-4 text-xs",md:"h-11 px-6 text-sm",lg:"h-14 px-8 text-lg",xl:"h-16 px-10 text-xl"}[s]} ${i?"w-full":""} ${l}`,...n,children:[r&&(0,t.jsx)("span",{className:"material-symbols-outlined",children:r}),e]})])},25477,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(27972),i=e.i(48978);function l(e){let t=Math.max(0,Math.round(e)),a=Math.floor(t/60),s=String(t%60).padStart(2,"0");return`${a}:${s}`}async function n(e,t){if("u">typeof navigator&&navigator.share)try{await navigator.share({title:"PaceLink",text:e,url:t});return}catch{}try{await navigator.clipboard.writeText(e),alert("Link copiado para a área de transferência.")}catch{prompt("Copie o link abaixo:",t)}}function d(){let e=(0,s.useRouter)(),d=(0,s.useParams)(),o=d?.slug||"",c=(0,a.useMemo)(()=>(0,r.createClient)(),[]),[m,x]=(0,a.useState)(!0),[u,p]=(0,a.useState)(null),[h,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=!0;return async function(){x(!0),p(null);try{if(!o)throw Error("Link inválido.");try{let t=await fetch(`/api/public/workout?slug=${encodeURIComponent(o)}`);if(t.ok){let a=await t.json();if(!e)return;f(a);return}}catch{}try{let{data:t,error:a}=await c.functions.invoke("public-workout",{body:{slug:o}});if(!a&&t){if(!e)return;f(t);return}}catch{}let{data:t,error:a}=await c.from("workouts").select("template_type,total_km,blocks,updated_at,version").eq("share_slug",o).eq("status","ready").single();if(a)throw a;if(!e)return;f({template_type:t.template_type,total_km:Number(t.total_km)||0,blocks:t.blocks||[],updated_at:t.updated_at??null,version:t.version??null})}catch(t){if(!e)return;p(t?.message||"Não foi possível carregar o treino.")}finally{if(!e)return;x(!1)}}(),()=>{e=!1}},[o,c]);let b=(0,a.useMemo)(()=>{var e;let t,a,s,r,i=h?.blocks??[],l="easy_run"===(e=h?.template_type||"")?"Rodagem":"progressive"===e?"Progressivo":"alternated"===e?"Alternado":"Treino",n=function(e){if(!e)return"—";let t=new Date(e),a=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0");return`${a}/${s}`}(h?.updated_at),d=h?.total_km?Number(h.total_km):Math.round(10*i.reduce((e,t)=>e+(Number(t.distance_km)||0),0))/10,o=function(e){let t=0,a=!1;for(let s of e){let e=Number(s.distance_km)||0;if(!e)continue;let r=s.pace_min_sec_per_km??null,i=s.pace_max_sec_per_km??null;r&&i&&(a=!0,t+=(r+i)/2*e/60)}return a?Math.round(t):null}(i);return{title:"Rodagem"===l?"Treino de Rodagem":"Progressivo"===l?"Treino Progressivo":"Alternado"===l?"Treino Alternado":"Treino",subtitle:"—"!==n?`Atualizado em ${n}`:"—",distanceKm:d,duration:o,intensity:(a=(t=i.filter(e=>(e.segment_type??"main")==="main")).some(e=>"forte"===e.intensity),s=t.some(e=>"moderado"===e.intensity),{level:r=a?"forte":s?"moderado":"leve",label:"forte"===r?"ALTO":"moderado"===r?"MÉDIO":"BAIXO",value:"forte"===r?85:"moderado"===r?60:35,description:"forte"===r?"Treino de esforço alto. Mantenha a técnica e evite “explodir” cedo.":"moderado"===r?"Treino de esforço sustentado. Controle a respiração e mantenha constância.":"Treino confortável. Foque em eficiência e consistência."}),blocks:i,type:l,updated:n}},[h]);async function g(){let e=`${window.location.origin}/w/${o}`,t=`Treino PaceLink

${b.title}
Dist\xe2ncia: ${b.distanceKm} km
${b.duration?`Dura\xe7\xe3o estimada: ${b.duration} min
`:""}
Link:
${e}`;await n(t,e)}return(0,t.jsxs)("div",{className:"flex-1 flex flex-col bg-background-light dark:bg-background-dark",children:[(0,t.jsxs)("header",{className:"flex items-center justify-between px-5 pt-6 pb-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:(0,t.jsx)("span",{className:"material-symbols-outlined",children:"directions_run"})}),(0,t.jsx)("h2",{className:"font-display font-semibold text-lg",children:"PaceLink"}),(0,t.jsx)("button",{type:"button",className:"w-10 h-10 rounded-full bg-surface-dark/70 hover:bg-surface-dark flex items-center justify-center transition",onClick:g,"aria-label":"Compartilhar",title:"Compartilhar",children:(0,t.jsx)("span",{className:"material-symbols-outlined text-slate-200",children:"ios_share"})})]}),(0,t.jsxs)("main",{className:"flex-1 flex flex-col px-5 pb-8 pt-3",children:[m&&(0,t.jsx)("div",{className:"text-slate-200/80 text-sm",children:"Carregando treino..."}),u&&(0,t.jsxs)("div",{className:"rounded-lg bg-red-50 dark:bg-red-900/20 p-4 text-sm text-red-700 dark:text-red-300",children:[u,(0,t.jsxs)("div",{className:"mt-2 text-xs text-red-200/80",children:["Se este link deveria ser público, verifique se existe uma Edge Function “public-workout” ou se a RLS permite leitura por ",(0,t.jsx)("code",{children:"share_slug"}),"."]})]}),!m&&!u&&h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-primary",children:b.type}),(0,t.jsx)("div",{className:"text-xs text-slate-300 mt-1",children:"—"!==b.updated?b.updated:""}),(0,t.jsx)("h1",{className:"mt-2 text-3xl font-extrabold",children:b.title}),(0,t.jsx)("p",{className:"mt-1 text-sm text-slate-300",children:b.subtitle})]}),(0,t.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"rounded-2xl bg-surface-dark/70 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-primary",children:[(0,t.jsx)("span",{className:"material-symbols-outlined",children:"timer"})," Duração"]}),(0,t.jsx)("div",{className:"mt-2 text-3xl font-extrabold",children:b.duration??"—"}),(0,t.jsx)("div",{className:"text-sm text-slate-300",children:b.duration?"min":""})]}),(0,t.jsxs)("div",{className:"rounded-2xl bg-surface-dark/70 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-primary",children:[(0,t.jsx)("span",{className:"material-symbols-outlined",children:"pin_drop"})," Distância"]}),(0,t.jsx)("div",{className:"mt-2 text-3xl font-extrabold",children:b.distanceKm}),(0,t.jsx)("div",{className:"text-sm text-slate-300",children:"km"})]})]}),(0,t.jsxs)("div",{className:"mt-4 rounded-2xl bg-surface-dark/70 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"font-semibold",children:"Nível de intensidade"}),(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-primary font-bold",children:b.intensity.label})]}),(0,t.jsx)("div",{className:"mt-3 h-2 rounded-full bg-black/30 overflow-hidden",children:(0,t.jsx)("div",{className:"h-2 bg-primary rounded-full",style:{width:`${b.intensity.value}%`}})}),(0,t.jsx)("p",{className:"mt-3 text-sm text-slate-300",children:b.intensity.description})]}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Estrutura do treino"}),(0,t.jsx)("div",{className:"mt-3 space-y-3",children:b.blocks.map((e,a)=>{let s=e.pace_min_sec_per_km&&e.pace_max_sec_per_km?`${l(e.pace_min_sec_per_km)}–${l(e.pace_max_sec_per_km)} min/km`:"livre"===e.intensity?"Ritmo livre":"Ritmo guiado";return(0,t.jsxs)("div",{className:"rounded-2xl bg-surface-dark/70 p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold",children:e.label}),(0,t.jsxs)("div",{className:"mt-1 text-sm text-slate-300",children:[Number(e.distance_km)," km • ",s]})]}),(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-primary font-bold",children:"livre"===e.intensity?"LIVRE":"forte"===e.intensity?"FORTE":"moderado"===e.intensity?"MODERADO":"LEVE"})]}),e.hint_text&&(0,t.jsx)("div",{className:"mt-2 text-sm text-slate-300",children:e.hint_text})]},`${a}-${e.label}`)})})]}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsxs)(i.Button,{fullWidth:!0,onClick:()=>e.push(`/w/${o}/run`),children:[(0,t.jsx)("span",{className:"material-symbols-outlined align-middle mr-2",children:"play_arrow"}),"Iniciar execução"]}),(0,t.jsx)("div",{className:"mt-3 text-xs text-slate-400",children:"Dica: mantenha a tela ligada durante a execução."})]})]})]})]})}e.s(["default",()=>d])}]);