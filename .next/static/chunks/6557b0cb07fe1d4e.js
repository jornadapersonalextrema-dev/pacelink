(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80334,e=>{"use strict";var t=e.i(43476);e.s(["Card",0,({children:e,className:a="",onClick:s})=>(0,t.jsx)("div",{onClick:s,className:`bg-white dark:bg-surface-dark rounded-2xl border border-slate-200 dark:border-white/5 p-4 shadow-sm transition-all ${s?"cursor-pointer hover:border-primary/50 active:scale-[0.99]":""} ${a}`,children:e})])},18566,(e,t,a)=>{t.exports=e.r(76562)},48978,e=>{"use strict";var t=e.i(43476);e.s(["Button",0,({children:e,variant:a="primary",size:s="lg",icon:r,fullWidth:n=!0,className:i="",...l})=>(0,t.jsxs)("button",{className:`flex items-center justify-center gap-2 rounded-full font-bold transition-all active:scale-[0.98] ${{primary:"bg-primary text-background-dark shadow-lg shadow-primary/25 hover:bg-[#25c464]",secondary:"bg-white dark:bg-surface-dark border border-slate-200 dark:border-white/10 text-slate-900 dark:text-white",ghost:"bg-transparent text-slate-600 dark:text-slate-400 hover:bg-black/5 dark:hover:bg-white/5",danger:"bg-red-500 text-white shadow-lg shadow-red-500/20"}[a]} ${{sm:"h-9 px-4 text-xs",md:"h-11 px-6 text-sm",lg:"h-14 px-8 text-lg",xl:"h-16 px-10 text-xl"}[s]} ${n?"w-full":""} ${i}`,...l,children:[r&&(0,t.jsx)("span",{className:"material-symbols-outlined",children:r}),e]})])},46852,e=>{"use strict";var t=e.i(43476),a=e.i(18566);e.s(["Topbar",0,({title:e,showBack:s=!1,rightAction:r})=>{let n=(0,a.useRouter)();return(0,t.jsxs)("header",{className:"sticky top-0 z-50 flex items-center justify-between px-4 py-4 bg-white/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-black/5 dark:border-white/5 h-16",children:[(0,t.jsx)("div",{className:"flex items-center min-w-[40px]",children:s&&(0,t.jsx)("button",{onClick:()=>n.back(),className:"p-2 -ml-2 rounded-full hover:bg-black/5 dark:hover:bg-white/10 text-slate-900 dark:text-white transition-colors",children:(0,t.jsx)("span",{className:"material-symbols-outlined",children:"arrow_back_ios_new"})})}),(0,t.jsx)("h1",{className:"text-lg font-bold tracking-tight text-center flex-1 truncate px-2",children:e}),(0,t.jsx)("div",{className:"flex items-center justify-end min-w-[40px]",children:r})]})}])},44848,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(27972),n=e.i(46852),i=e.i(48978),l=e.i(80334);function d(e,t,a){return Number.isNaN(e)?t:Math.min(a,Math.max(t,e))}function c(e){let t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0");return`${t}/${a}`}function o(e){let t=Math.max(0,Math.round(e)),a=Math.floor(t/60),s=String(t%60).padStart(2,"0");return`${a}:${s}`}function m(e,t){let[a,s]={leve:[90,150],moderado:[45,90],forte:[15,45]}[t];return{min:e+a,max:e+s}}function u(){return Math.random().toString(36).slice(2,10)}function x(){let e=(0,s.useRouter)(),x=(0,s.useParams)(),p=x?.id||"",h=(0,a.useMemo)(()=>(0,r.createClient)(),[]),[g,b]=(0,a.useState)(null),[f,v]=(0,a.useState)("rodagem"),[k,j]=(0,a.useState)(!0),[N,y]=(0,a.useState)(2),[_,w]=(0,a.useState)(!1),[C,$]=(0,a.useState)(1),[S,R]=(0,a.useState)(5),[A,M]=(0,a.useState)("moderado"),[T,q]=(0,a.useState)([{id:u(),distanceKm:5,intensity:"moderado"}]),[D,F]=(0,a.useState)(6),[K,B]=(0,a.useState)(.2),[L,E]=(0,a.useState)(.2),[P,z]=(0,a.useState)(null),[I,U]=(0,a.useState)(null),[O,W]=(0,a.useState)(!1),[H,Q]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=!0;return async function(){if(Q(null),!p)return;let{data:t,error:a}=await h.from("students").select("id,name,email,p1k_sec_per_km").eq("id",p).single();if(e){if(a)return Q(a.message);b(t)}}(),()=>{e=!1}},[p,h]),(0,a.useEffect)(()=>{"progressivo"===f&&0===T.length&&q([{id:u(),distanceKm:5,intensity:"moderado"}])},[f,T.length]);let G=g?.p1k_sec_per_km??null,J=(0,a.useMemo)(()=>{let e=[],t=new Date,a=t=>{e.push({...t,index:e.length})};k&&a({segment_type:"warmup",label:"Aquecimento",distance_km:d(N,.1,50),intensity:"livre",hint_text:"Ritmo confortável para preparar o corpo."});let s="easy_run",r={};if("rodagem"===f){s="easy_run",r={main_distance_km:d(S,.1,200),intensity:A};let e=G?m(G,A):null;a({segment_type:"main",label:"Trecho principal",distance_km:d(S,.1,200),intensity:A,pace_min_sec_per_km:e?.min??null,pace_max_sec_per_km:e?.max??null,hint_text:"leve"===A?"Leve e constante. Foque em respirar e manter técnica.":"Moderado e constante. Sustente sem “quebrar”."})}if("progressivo"===f&&(s="progressive",r={phases:T.map((e,t)=>({order:t+1,distance_km:d(e.distanceKm,.1,200),intensity:e.intensity}))},T.forEach((e,t)=>{let s=G?m(G,e.intensity):null;a({segment_type:"main",label:`Bloco ${t+1}`,distance_km:d(e.distanceKm,.1,200),intensity:e.intensity,pace_min_sec_per_km:s?.min??null,pace_max_sec_per_km:s?.max??null,hint_text:"leve"===e.intensity?"Comece controlado, foco em eficiência.":"moderado"===e.intensity?"Aumente gradualmente mantendo controle.":"Feche forte sem perder a técnica."})})),"alternado"===f){s="alternated",r={repeats:d(D,1,60),strong_distance_km:d(K,.05,10),easy_distance_km:d(L,.05,10)};let e=d(D,1,60);for(let t=1;t<=e;t++){let e=G?m(G,"forte"):null;a({segment_type:"main",label:`Tiro ${t}`,distance_km:d(K,.05,10),intensity:"forte",pace_min_sec_per_km:e?.min??null,pace_max_sec_per_km:e?.max??null,hint_text:"Forte. Foque em postura e cadência."}),a({segment_type:"main",label:`Recupera\xe7\xe3o ${t}`,distance_km:d(L,.05,10),intensity:"leve",pace_min_sec_per_km:null,pace_max_sec_per_km:null,hint_text:"Solte e recupere. Respiração e técnica."})}}_&&a({segment_type:"cooldown",label:"Desaquecimento",distance_km:d(C,.1,50),intensity:"livre",hint_text:"Reduza o ritmo gradualmente para recuperar."});let n=e.reduce((e,t)=>e+(Number(t.distance_km)||0),0),i="rodagem"===f?"Rodagem":"progressivo"===f?"Progressivo":"Alternado";return{blocks:e,total_km:Math.round(10*n)/10,template_type:s,template_params:r,share_title:`${i} • ${c(t)}`}},[k,N,_,C,f,S,A,T,D,K,L,G]);async function V(){let{data:t}=await h.auth.getUser();if(!t.user)throw e.push("/login"),Error("Sessão expirada. Faça login novamente.");return t.user}async function X(e){W(!0),Q(null);try{let t,a,s=await V(),r="ready"===e?I||(t=(J.share_title||"treino").trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"").slice(0,60),a=Math.random().toString(36).slice(2,6),`${t}-${a}`):null,n={trainer_id:s.id,student_id:p,status:e,template_type:J.template_type,include_warmup:k,warmup_km:k?N:null,include_cooldown:_,cooldown_km:_?C:null,template_params:J.template_params,blocks:J.blocks,total_km:J.total_km,share_slug:r},i=null;if(P){let{data:e,error:t}=await h.from("workouts").update(n).eq("id",P).select("id,share_slug").single();if(t)throw t;i=e}else{let{data:e,error:t}=await h.from("workouts").insert(n).select("id,share_slug").single();if(t)throw t;i=e,z(i.id)}return U(i?.share_slug??r),i?.share_slug??r}finally{W(!1)}}async function Y(){try{await X("draft"),alert("Rascunho salvo com sucesso.")}catch(e){Q(e?.message||"Erro ao salvar rascunho.")}}async function Z(e,t){if("u">typeof navigator&&navigator.share)try{await navigator.share({title:"PaceLink",text:e,url:t});return}catch{}try{await navigator.clipboard.writeText(e),alert("Link copiado para a área de transferência.")}catch{prompt("Copie o link abaixo:",t)}}async function ee(){try{let e=await X("ready");if(!e)throw Error("Não foi possível gerar o link compartilhável.");let t=`${window.location.origin}/w/${e}`,a=`Treino do dia (${c(new Date)})
Aluno: ${g?.name||"—"}

Abra o link e toque em “Iniciar execu\xe7\xe3o”:
${t}

Qualquer d\xfavida, me chama.`;await Z(a,t),window.open(t,"_blank","noopener,noreferrer")}catch(e){Q(e?.message||"Erro ao compartilhar treino.")}}let et=e=>`px-4 py-2 rounded-full text-sm font-semibold transition ${e?"bg-primary text-slate-900":"bg-surface-dark text-slate-200 hover:bg-surface-dark/80"}`,ea=e=>`flex-1 py-2 rounded-full text-sm font-semibold transition ${e?"bg-primary text-slate-900":"bg-surface-dark text-slate-300 hover:bg-surface-dark/80"}`,es=e=>`flex-1 py-2 rounded-full text-sm font-semibold transition ${e?"bg-primary text-slate-900":"bg-surface-dark text-slate-300 hover:bg-surface-dark/80"}`;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Topbar,{title:"Criar Treino",backHref:`/students/${p}`}),(0,t.jsxs)("main",{className:"flex-1 flex flex-col p-6 gap-5",children:[H&&(0,t.jsx)("div",{className:"rounded-lg bg-red-50 dark:bg-red-900/20 p-4 text-sm text-red-700 dark:text-red-300",children:H}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Tipo de Treino"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{type:"button",className:et("rodagem"===f),onClick:()=>v("rodagem"),children:[(0,t.jsx)("span",{className:"material-symbols-outlined align-middle mr-2",children:"directions_run"}),"Rodagem"]}),(0,t.jsx)("button",{type:"button",className:et("progressivo"===f),onClick:()=>v("progressivo"),children:"Progressivo"}),(0,t.jsx)("button",{type:"button",className:et("alternado"===f),onClick:()=>v("alternado"),children:"Alternado"})]})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Estrutura"}),(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-primary",children:"local_fire_department"}),(0,t.jsx)("span",{className:"font-semibold",children:"Aquecimento"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>j(e=>!e),className:`w-14 h-8 rounded-full p-1 transition ${k?"bg-primary/90":"bg-surface-dark"}`,"aria-label":"Ativar aquecimento",children:(0,t.jsx)("span",{className:`block w-6 h-6 rounded-full bg-white transition ${k?"translate-x-6":"translate-x-0"}`})})]}),k&&(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"rounded-xl bg-surface-dark/60 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Distância"}),(0,t.jsxs)("div",{className:"mt-1 flex items-baseline gap-2",children:[(0,t.jsx)("input",{type:"number",step:"0.1",value:N,onChange:e=>y(Number(e.target.value)),className:"w-20 bg-transparent text-2xl font-bold outline-none"}),(0,t.jsx)("span",{className:"text-slate-400",children:"km"})]})]}),(0,t.jsxs)("div",{className:"rounded-xl bg-surface-dark/60 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Ritmo"}),(0,t.jsx)("div",{className:"mt-2 text-lg font-semibold",children:"Livre"})]})]})]}),(0,t.jsxs)("div",{className:"mt-5",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400 mb-2",children:"Blocos principais"}),"rodagem"===f&&(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"rounded-xl bg-surface-dark/60 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Distância do trecho"}),(0,t.jsxs)("div",{className:"mt-1 flex items-baseline gap-2",children:[(0,t.jsx)("input",{type:"number",step:"0.1",value:S,onChange:e=>R(Number(e.target.value)),className:"w-24 bg-transparent text-2xl font-bold outline-none"}),(0,t.jsx)("span",{className:"text-slate-400",children:"km"})]})]}),(0,t.jsxs)("div",{className:"rounded-xl bg-surface-dark/60 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Intensidade"}),(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsx)("button",{type:"button",className:es("leve"===A),onClick:()=>M("leve"),children:"Leve"}),(0,t.jsx)("button",{type:"button",className:es("moderado"===A),onClick:()=>M("moderado"),children:"Moderado"})]})]})]}),G&&(0,t.jsxs)("div",{className:"mt-3 text-sm text-slate-300",children:["Alvo estimado (base P1K):"," ",(0,t.jsxs)("span",{className:"font-semibold text-primary",children:[o(m(G,A).min),"–",o(m(G,A).max)," min/km"]})]})]}),"progressivo"===f&&(0,t.jsxs)(t.Fragment,{children:[T.map((e,a)=>(0,t.jsxs)(l.Card,{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"rounded-xl bg-surface-dark/60 p-3",children:[(0,t.jsxs)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:["Distância (Bloco ",a+1,")"]}),(0,t.jsxs)("div",{className:"mt-1 flex items-baseline gap-2",children:[(0,t.jsx)("input",{type:"number",step:"0.1",value:e.distanceKm,onChange:t=>{let a=Number(t.target.value);q(t=>t.map(t=>t.id===e.id?{...t,distanceKm:a}:t))},className:"w-24 bg-transparent text-2xl font-bold outline-none"}),(0,t.jsx)("span",{className:"text-slate-400",children:"km"})]})]}),(0,t.jsxs)("div",{className:"rounded-xl bg-surface-dark/60 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Intensidade"}),(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsx)("button",{type:"button",className:ea("leve"===e.intensity),onClick:()=>q(t=>t.map(t=>t.id===e.id?{...t,intensity:"leve"}:t)),children:"Leve"}),(0,t.jsx)("button",{type:"button",className:ea("moderado"===e.intensity),onClick:()=>q(t=>t.map(t=>t.id===e.id?{...t,intensity:"moderado"}:t)),children:"Moderado"}),(0,t.jsx)("button",{type:"button",className:ea("forte"===e.intensity),onClick:()=>q(t=>t.map(t=>t.id===e.id?{...t,intensity:"forte"}:t)),children:"Forte"})]})]})]}),(0,t.jsx)("button",{type:"button",title:"Remover bloco",onClick:()=>{q(t=>t.length<=1?t:t.filter(t=>t.id!==e.id))},className:"mt-2 text-slate-300 hover:text-red-300 transition",children:(0,t.jsx)("span",{className:"material-symbols-outlined",children:"delete"})})]}),G&&(0,t.jsxs)("div",{className:"mt-3 text-sm text-slate-300",children:["Alvo estimado:"," ",(0,t.jsxs)("span",{className:"font-semibold text-primary",children:[o(m(G,e.intensity).min),"–",o(m(G,e.intensity).max)," min/km"]})]})]},e.id)),(0,t.jsxs)("button",{type:"button",className:"w-full border border-dashed border-slate-600 rounded-2xl py-4 text-slate-200 hover:border-slate-500 hover:bg-surface-dark/30 transition",onClick:()=>q(e=>[...e,{id:u(),distanceKm:1,intensity:"moderado"}]),children:[(0,t.jsx)("span",{className:"material-symbols-outlined align-middle mr-2",children:"add"}),"Adicionar Bloco"]})]}),"alternado"===f&&(0,t.jsx)(l.Card,{children:(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"rounded-xl bg-surface-dark/60 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Repetições"}),(0,t.jsxs)("div",{className:"mt-1 flex items-baseline gap-2",children:[(0,t.jsx)("input",{type:"number",step:"1",value:D,onChange:e=>F(Number(e.target.value)),className:"w-20 bg-transparent text-2xl font-bold outline-none"}),(0,t.jsx)("span",{className:"text-slate-400",children:"x"})]})]}),(0,t.jsxs)("div",{className:"rounded-xl bg-surface-dark/60 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Tiro (Forte)"}),(0,t.jsxs)("div",{className:"mt-1 flex items-baseline gap-2",children:[(0,t.jsx)("input",{type:"number",step:"0.05",value:K,onChange:e=>B(Number(e.target.value)),className:"w-20 bg-transparent text-2xl font-bold outline-none"}),(0,t.jsx)("span",{className:"text-slate-400",children:"km"})]})]}),(0,t.jsxs)("div",{className:"rounded-xl bg-surface-dark/60 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Recuperação (Leve)"}),(0,t.jsxs)("div",{className:"mt-1 flex items-baseline gap-2",children:[(0,t.jsx)("input",{type:"number",step:"0.05",value:L,onChange:e=>E(Number(e.target.value)),className:"w-20 bg-transparent text-2xl font-bold outline-none"}),(0,t.jsx)("span",{className:"text-slate-400",children:"km"})]})]})]})})]}),(0,t.jsx)("div",{className:"mt-5",children:(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-primary",children:"ac_unit"}),(0,t.jsx)("span",{className:"font-semibold",children:"Desaquecimento"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>w(e=>!e),className:`w-14 h-8 rounded-full p-1 transition ${_?"bg-primary/90":"bg-surface-dark"}`,"aria-label":"Ativar desaquecimento",children:(0,t.jsx)("span",{className:`block w-6 h-6 rounded-full bg-white transition ${_?"translate-x-6":"translate-x-0"}`})})]}),_&&(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"rounded-xl bg-surface-dark/60 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Distância"}),(0,t.jsxs)("div",{className:"mt-1 flex items-baseline gap-2",children:[(0,t.jsx)("input",{type:"number",step:"0.1",value:C,onChange:e=>$(Number(e.target.value)),className:"w-20 bg-transparent text-2xl font-bold outline-none"}),(0,t.jsx)("span",{className:"text-slate-400",children:"km"})]})]}),(0,t.jsxs)("div",{className:"rounded-xl bg-surface-dark/60 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Ritmo"}),(0,t.jsx)("div",{className:"mt-2 text-lg font-semibold",children:"Livre"})]})]})]})}),(0,t.jsxs)("div",{className:"mt-5 text-sm text-slate-300",children:["Distância total estimada:"," ",(0,t.jsxs)("span",{className:"font-semibold text-primary",children:[J.total_km," km"]})]})]}),(0,t.jsxs)("div",{className:"mt-auto flex gap-3 pt-3",children:[(0,t.jsx)(i.Button,{variant:"secondary",fullWidth:!0,onClick:Y,disabled:O,children:O?"Salvando...":"Salvar rascunho"}),(0,t.jsxs)(i.Button,{fullWidth:!0,onClick:ee,disabled:O,children:[(0,t.jsx)("span",{className:"material-symbols-outlined align-middle mr-2",children:"share"}),"Compartilhar"]})]})]})]})}e.s(["default",()=>x])}]);