module.exports=[9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},81361,a=>{"use strict";var b=a.i(87924);let c=({title:a="PaceLink",showBack:c=!1,onBack:d,rightSlot:e,action:f,className:g=""})=>(0,b.jsx)("div",{className:`w-full bg-[#d1d1d1] ${g}`,children:(0,b.jsxs)("div",{className:"mx-auto max-w-2xl flex items-center justify-between px-4 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[c?(0,b.jsx)("button",{type:"button",onClick:d,"aria-label":"Voltar",className:"text-white/90 hover:text-white",children:(0,b.jsx)("span",{className:"text-2xl leading-none",children:"‹"})}):null,(0,b.jsx)("div",{className:"text-white text-xl font-semibold truncate",children:a})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:e??f??null})]})});a.s(["Topbar",0,c,"default",0,c])},34136,a=>{"use strict";var b=a.i(87924);let c=({children:a,variant:c="primary",size:d="lg",icon:e,fullWidth:f=!0,className:g="",...h})=>(0,b.jsxs)("button",{className:`flex items-center justify-center gap-2 rounded-full font-bold transition-all active:scale-[0.98] ${{primary:"bg-primary text-background-dark shadow-lg shadow-primary/25 hover:bg-[#25c464]",secondary:"bg-white dark:bg-surface-dark border border-slate-200 dark:border-white/10 text-slate-900 dark:text-white",ghost:"bg-transparent text-slate-600 dark:text-slate-400 hover:bg-black/5 dark:hover:bg-white/5",danger:"bg-red-500 text-white shadow-lg shadow-red-500/20"}[c]} ${{sm:"h-9 px-4 text-xs",md:"h-11 px-6 text-sm",lg:"h-14 px-8 text-lg",xl:"h-16 px-10 text-xl"}[d]} ${f?"w-full":""} ${g}`,...h,children:[e&&(0,b.jsx)("span",{className:"material-symbols-outlined",children:e}),a]});a.s(["Button",0,c,"default",0,c])},50181,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(19818),f=a.i(81361),g=a.i(34136);function h(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}function i(a){let b=Number(String(a).replace(",","."));return Number.isFinite(b)?b:0}function j(a,b){if(!a||a<=0)return"—";let c=a;"leve"===b&&(c=1.2*a),"forte"===b&&(c=.9*a);let d=Math.floor(c/60),e=Math.round(c%60);return`${d}:${String(e).padStart(2,"0")}/km`}function k(){let a=(0,c.useMemo)(()=>(0,e.createClient)(),[]),k=(0,d.useRouter)(),l=(0,d.useParams)(),m=(0,d.useSearchParams)(),n=String(l?.id||""),o=m?.get("weekId"),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)("Treino"),[B,C]=(0,c.useState)(!0),[D,E]=(0,c.useState)(1),[F,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(1),[J,K]=(0,c.useState)([{id:h(),distanceKm:"1",intensity:"moderado",paceStr:"",note:""},{id:h(),distanceKm:"1",intensity:"forte",paceStr:"",note:""}]),L=(0,c.useMemo)(()=>Math.round(10*(((B?D:0)||0)+((F?H:0)||0)+J.reduce((a,b)=>a+i(b.distanceKm),0)))/10,[B,D,F,H,J]);function M(a,b){K(c=>c.map(c=>c.id===a?{...c,...b}:c))}async function N(){if(v){s(!0),u(null);try{let{data:b}=await a.auth.getSession(),c=b?.session?.user?.id;if(!c)throw Error("Você precisa estar logado como treinador.");let d={...{trainer_id:c,student_id:v.id,status:"draft",template_type:"run",title:z?.trim()||null,include_warmup:B,warmup_km:B?D:0,include_cooldown:F,cooldown_km:F?H:0,total_km:L,share_slug:null,blocks:J.map(a=>({distance_km:i(a.distanceKm),intensity:a.intensity,pace:a.paceStr||null,note:a.note||null}))}};o&&(d.week_id=o);let{data:e,error:f}=await a.from("workouts").insert(d).select("id").single();if(f)throw f;k.push(`/workouts/${e.id}/edit`)}catch(a){u(a?.message||"Erro ao salvar")}finally{s(!1)}}}return(0,c.useEffect)(()=>{let b=!0;return async function(){q(!0),u(null);try{let{data:c,error:d}=await a.from("students").select("id,name,public_slug,email,p1k_sec_per_km").eq("id",n).maybeSingle();if(d)throw d;if(!c)throw Error("Aluno não encontrado");if(!b)return;if(w(c),o){let{data:c,error:d}=await a.from("weeks").select("id,trainer_id,week_start,week_end,label").eq("id",o).maybeSingle();if(d)throw d;if(!b)return;y(c)}c?.p1k_sec_per_km&&K(a=>a.map(a=>({...a,paceStr:a.paceStr||j(c.p1k_sec_per_km,a.intensity)})))}catch(a){if(!b)return;u(a?.message||"Erro ao carregar")}finally{if(!b)return;q(!1)}}(),()=>{b=!1}},[a,n,o]),p?(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-background-dark to-black text-white",children:[(0,b.jsx)(f.default,{title:"Novo treino"}),(0,b.jsx)("div",{className:"mx-auto max-w-4xl p-6",children:"Carregando…"})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-background-dark to-black text-white",children:[(0,b.jsx)(f.default,{title:"Novo treino"}),(0,b.jsxs)("div",{className:"mx-auto max-w-4xl p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-3xl bg-surface-dark/70 border border-white/10 p-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-white/60",children:"Novo treino"}),(0,b.jsx)("div",{className:"text-2xl font-extrabold",children:v?.name}),(0,b.jsxs)("div",{className:"text-sm text-white/60 mt-1",children:["Ritmo P1k: ",function(a){if(!a||a<=0)return"—";let b=Math.floor(a/60),c=Math.round(a%60);return`${b}:${String(c).padStart(2,"0")}/km`}(v?.p1k_sec_per_km||null)]}),x?.week_start&&x?.week_end&&(0,b.jsxs)("div",{className:"mt-2 text-sm text-white/70",children:["Semana: ",(0,b.jsx)("span",{className:"font-semibold",children:x.label||function(a,b){try{let c=new Date(a+"T00:00:00"),d=new Date(b+"T00:00:00"),e=a=>`${String(a.getDate()).padStart(2,"0")}/${String(a.getMonth()+1).padStart(2,"0")}`;return`${e(c)} – ${e(d)}`}catch{return`${a} – ${b}`}}(x.week_start,x.week_end)})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)("button",{onClick:()=>k.back(),className:"px-4 h-10 rounded-full bg-white/5 hover:bg-white/10 border border-white/10",children:"Voltar"})})]}),t&&(0,b.jsx)("div",{className:"mt-4 rounded-2xl bg-red-500/15 border border-red-500/30 p-4 text-red-200",children:t})]}),(0,b.jsxs)("div",{className:"rounded-3xl bg-surface-dark/70 border border-white/10 p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-white/60 mb-1",children:"Título"}),(0,b.jsx)("input",{value:z,onChange:a=>A(a.target.value),className:"w-full h-12 rounded-2xl bg-black/30 border border-white/10 px-4 outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-white/60 mb-1",children:"Total estimado"}),(0,b.jsxs)("div",{className:"h-12 rounded-2xl bg-black/30 border border-white/10 px-4 flex items-center font-bold",children:[L," km"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:gap-6",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:B,onChange:a=>C(a.target.checked)}),(0,b.jsx)("span",{className:"text-white/80",children:"Aquecimento"})]}),(0,b.jsx)("input",{disabled:!B,value:D,onChange:a=>E(Number(a.target.value)),type:"number",step:"0.5",min:"0",className:"w-28 h-10 rounded-2xl bg-black/30 border border-white/10 px-3 outline-none disabled:opacity-40"}),(0,b.jsx)("span",{className:"text-white/60",children:"km"}),(0,b.jsxs)("label",{className:"flex items-center gap-2 md:ml-6",children:[(0,b.jsx)("input",{type:"checkbox",checked:F,onChange:a=>G(a.target.checked)}),(0,b.jsx)("span",{className:"text-white/80",children:"Desaquecimento"})]}),(0,b.jsx)("input",{disabled:!F,value:H,onChange:a=>I(Number(a.target.value)),type:"number",step:"0.5",min:"0",className:"w-28 h-10 rounded-2xl bg-black/30 border border-white/10 px-3 outline-none disabled:opacity-40"}),(0,b.jsx)("span",{className:"text-white/60",children:"km"})]})]}),(0,b.jsxs)("div",{className:"rounded-3xl bg-surface-dark/70 border border-white/10 p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-lg font-extrabold",children:"Blocos"}),(0,b.jsx)("button",{onClick:function(){let a=v?.p1k_sec_per_km||null,b="moderado";K(c=>[...c,{id:h(),distanceKm:"1",intensity:b,paceStr:j(a,b),note:""}])},className:"px-4 h-10 rounded-full bg-white/5 hover:bg-white/10 border border-white/10",children:"+ Adicionar bloco"})]}),(0,b.jsx)("div",{className:"space-y-3",children:J.map((a,c)=>(0,b.jsxs)("div",{className:"rounded-2xl bg-black/25 border border-white/10 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"font-bold",children:["Bloco ",c+1]}),J.length>1&&(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void K(a=>a.filter(a=>a.id!==b))},className:"text-sm text-red-200 hover:text-red-100",children:"Remover"})]}),(0,b.jsxs)("div",{className:"mt-3 grid gap-3 md:grid-cols-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-white/60 mb-1",children:"Distância (km)"}),(0,b.jsx)("input",{value:a.distanceKm,onChange:b=>M(a.id,{distanceKm:b.target.value}),className:"w-full h-10 rounded-2xl bg-black/30 border border-white/10 px-3 outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-white/60 mb-1",children:"Intensidade"}),(0,b.jsxs)("select",{value:a.intensity,onChange:b=>M(a.id,{intensity:b.target.value,paceStr:j(v?.p1k_sec_per_km||null,b.target.value)}),className:"w-full h-10 rounded-2xl bg-black/30 border border-white/10 px-3 outline-none focus:border-primary",children:[(0,b.jsx)("option",{value:"leve",children:"Leve"}),(0,b.jsx)("option",{value:"moderado",children:"Moderado"}),(0,b.jsx)("option",{value:"forte",children:"Forte"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-white/60 mb-1",children:"Pace sugerido"}),(0,b.jsx)("input",{value:a.paceStr,onChange:b=>M(a.id,{paceStr:b.target.value}),className:"w-full h-10 rounded-2xl bg-black/30 border border-white/10 px-3 outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-white/60 mb-1",children:"Obs"}),(0,b.jsx)("input",{value:a.note,onChange:b=>M(a.id,{note:b.target.value}),className:"w-full h-10 rounded-2xl bg-black/30 border border-white/10 px-3 outline-none focus:border-primary"})]})]})]},a.id))}),(0,b.jsx)("div",{className:"pt-2",children:(0,b.jsx)(g.default,{onClick:N,disabled:r,children:r?"Salvando…":"Criar treino"})})]})]})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3d124255._.js.map