{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../app/students/%5Bid%5D/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","'use client';\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useParams, useRouter } from 'next/navigation';\nimport { createClient } from '../../../lib/supabaseBrowser';\n\ntype StudentRow = {\n  id: string;\n  trainer_id: string;\n  name: string;\n  email: string | null;\n  p1k_sec_per_km: number | null;\n  public_slug: string | null;\n  created_at: string | null;\n};\n\ntype WeekRow = {\n  id: string;\n  student_id: string;\n  trainer_id: string;\n  week_start: string; // YYYY-MM-DD\n  week_end: string;   // YYYY-MM-DD\n  label: string | null;\n};\n\ntype WorkoutRow = {\n  id: string;\n  student_id: string;\n  trainer_id: string;\n  status: 'draft' | 'ready' | 'archived';\n  template_type: string;\n  title: string | null;\n  total_km: number | null;\n  created_at: string;\n  planned_date: string | null;\n  planned_day: number | null;\n  share_slug: string | null;\n  week_id: string | null;\n  locked_at: string | null;\n  closed_reason?: string | null;\n};\n\ntype ExecutionRow = {\n  id: string;\n  workout_id: string;\n  status: 'in_progress' | 'completed';\n  performed_at: string | null;\n  completed_at: string | null;\n  rpe: number | null;\n  comment: string | null;\n  last_event_at: string | null;\n  started_at: string | null;\n};\n\nconst TEMPLATE_LABEL: Record<string, string> = {\n  easy_run: 'Rodagem',\n  progressive: 'Progressivo',\n  alternated: 'Alternado',\n};\n\nfunction formatPace(secPerKm: number | null) {\n  if (!secPerKm || secPerKm <= 0) return '—';\n  const m = Math.floor(secPerKm / 60);\n  const s = secPerKm % 60;\n  return `${m}:${String(s).padStart(2, '0')}/km`;\n}\n\nfunction formatDateBRLoose(iso: string | null) {\n  if (!iso) return '—';\n  const d = new Date(iso);\n  if (Number.isNaN(d.getTime())) return iso;\n  return d.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });\n}\n\nfunction formatRangeBR(weekStartISO: string, weekEndISO: string) {\n  return `${formatDateBRLoose(weekStartISO)} – ${formatDateBRLoose(weekEndISO)}`;\n}\n\nfunction statusLabel(status: WorkoutRow['status'], closedReason?: string | null) {\n  if (status === 'draft') return 'Rascunho';\n  if (status === 'ready') return 'Disponível';\n  if (status === 'archived') {\n    if (closedReason === 'week_expired') return 'Encerrado (sem execução)';\n    return 'Encerrado';\n  }\n  return status;\n}\n\nfunction kmLabel(km: number | null) {\n  if (km == null) return '—';\n  return Number(km).toFixed(1).replace('.', ',');\n}\n\nfunction pad2(n: number) {\n  return String(n).padStart(2, '0');\n}\n\nfunction toISODate(d: Date) {\n  // YYYY-MM-DD in local time (avoid timezone shifting from toISOString)\n  const y = d.getFullYear();\n  const m = pad2(d.getMonth() + 1);\n  const day = pad2(d.getDate());\n  return `${y}-${m}-${day}`;\n}\n\nfunction startOfWeekMonday(date: Date) {\n  const d = new Date(date);\n  const day = d.getDay(); // 0 Sun ... 6 Sat\n  const diff = (day === 0 ? -6 : 1 - day); // Monday start\n  d.setDate(d.getDate() + diff);\n  d.setHours(0, 0, 0, 0);\n  return d;\n}\n\nfunction addDays(date: Date, days: number) {\n  const d = new Date(date);\n  d.setDate(d.getDate() + days);\n  return d;\n}\n\nexport default function StudentProfilePage() {\n  const params = useParams();\n  const router = useRouter();\n  const supabase = useMemo(() => createClient(), []);\n\n  const studentId = String((params as any)?.id || '');\n  const [student, setStudent] = useState<StudentRow | null>(null);\n  const [studentSlug, setStudentSlug] = useState<string>('aluno');\n  const [weeks, setWeeks] = useState<WeekRow[]>([]);\n  const [selectedWeekId, setSelectedWeekId] = useState<string | null>(null);\n\n  const [workouts, setWorkouts] = useState<WorkoutRow[]>([]);\n  const [latestExecByWorkout, setLatestExecByWorkout] = useState<Record<string, ExecutionRow | null>>({});\n  const [loading, setLoading] = useState(true);\n  const [banner, setBanner] = useState<string | null>(null);\n\n  async function loadStudent() {\n    setLoading(true);\n    setBanner(null);\n\n    const { data: s, error } = await supabase\n      .from('students')\n      .select('id, trainer_id, name, email, p1k_sec_per_km, public_slug, created_at')\n      .eq('id', studentId)\n      .maybeSingle();\n\n    if (error) {\n      setBanner(error.message);\n      setLoading(false);\n      return;\n    }\n\n    if (!s) {\n      setBanner('Aluno não encontrado.');\n      setLoading(false);\n      return;\n    }\n\n    setStudent(s as StudentRow);\n    setStudentSlug(((s as any).public_slug as string) || 'aluno');\n\n    setLoading(false);\n  }\n\n  async function ensureUpcomingWeeks(s: StudentRow) {\n    // cria/garante semanas: semana atual + próximas 7 (ajuste se quiser mais)\n    const base = startOfWeekMonday(new Date());\n    const targets = Array.from({ length: 8 }).map((_, i) => {\n      const ws = addDays(base, i * 7);\n      const we = addDays(ws, 6);\n      return {\n        student_id: s.id,\n        trainer_id: s.trainer_id,\n        week_start: toISODate(ws),\n        week_end: toISODate(we),\n        label: `Semana ${formatRangeBR(toISODate(ws), toISODate(we))}`,\n      };\n    });\n\n    // upsert exige unique(student_id, week_start)\n    const up = await supabase.from('weeks').upsert(targets as any, { onConflict: 'student_id,week_start' });\n    if (up.error) {\n      // se a tabela ainda não existir, o app segue sem quebrar (mas a visão semanal não funciona)\n      setBanner(up.error.message);\n      return;\n    }\n\n    const { data: wk, error } = await supabase\n      .from('weeks')\n      .select('id, student_id, trainer_id, week_start, week_end, label')\n      .eq('student_id', s.id)\n      .order('week_start', { ascending: true });\n\n    if (error) {\n      setBanner(error.message);\n      return;\n    }\n\n    const list = (wk || []) as WeekRow[];\n    setWeeks(list);\n\n    const currentStartISO = toISODate(startOfWeekMonday(new Date()));\n    const current = list.find((w) => w.week_start === currentStartISO) || list[0] || null;\n    setSelectedWeekId(current?.id || null);\n  }\n\n  async function loadWorkoutsForWeek(weekId: string | null) {\n    if (!weekId) {\n      setWorkouts([]);\n      setLatestExecByWorkout({});\n      return;\n    }\n\n    // Treinos da semana selecionada\n    const { data: ws, error } = await supabase\n      .from('workouts')\n      .select(\n        'id, student_id, trainer_id, status, template_type, title, total_km, created_at, planned_date, planned_day, share_slug, week_id, locked_at, closed_reason'\n      )\n      .eq('student_id', studentId)\n      .eq('week_id', weekId)\n      .order('planned_day', { ascending: true, nullsFirst: false })\n      .order('created_at', { ascending: false })\n      .limit(200);\n\n    if (error) {\n      setBanner(error.message);\n      return;\n    }\n\n    const list = (ws || []) as WorkoutRow[];\n    setWorkouts(list);\n\n    if (list.length === 0) {\n      setLatestExecByWorkout({});\n      return;\n    }\n\n    const workoutIds = list.map((w) => w.id);\n    const { data: execs, error: execErr } = await supabase\n      .from('executions')\n      .select('id, workout_id, status, performed_at, completed_at, rpe, comment, last_event_at, started_at')\n      .in('workout_id', workoutIds);\n\n    if (execErr) {\n      // não bloqueia a tela, só perde o \"progresso\"\n      setLatestExecByWorkout({});\n      return;\n    }\n\n    const byWorkout: Record<string, ExecutionRow | null> = {};\n    for (const wid of workoutIds) byWorkout[wid] = null;\n\n    // pega a mais recente por last_event_at/started_at/completed_at\n    for (const e of (execs || []) as any[]) {\n      const cur = byWorkout[e.workout_id];\n      const curKey = cur?.last_event_at || cur?.completed_at || cur?.started_at || '';\n      const nextKey = e.last_event_at || e.completed_at || e.started_at || '';\n      if (!cur || (nextKey && nextKey > curKey)) {\n        byWorkout[e.workout_id] = e as ExecutionRow;\n      }\n    }\n\n    setLatestExecByWorkout(byWorkout);\n  }\n\n  async function copyWorkoutLink(workoutId: string) {\n    setBanner(null);\n\n    // Trigger gera share_slug ao mudar status para ready (no banco)\n    const { data, error } = await supabase\n      .from('workouts')\n      .update({ status: 'ready' })\n      .eq('id', workoutId)\n      .select('id, share_slug')\n      .maybeSingle();\n\n    if (error) {\n      setBanner(error.message);\n      return;\n    }\n\n    const slug = (data as any)?.share_slug as string | null;\n    if (!slug) {\n      setBanner('Não foi possível gerar o link (share_slug).');\n      return;\n    }\n\n    const url = `${window.location.origin}/w/${studentSlug}/${slug}`;\n    await navigator.clipboard.writeText(url);\n\n    setBanner('Link do treino copiado para a área de transferência.');\n    // atualiza local\n    setWorkouts((prev) => prev.map((w) => (w.id === workoutId ? ({ ...w, status: 'ready', share_slug: slug } as any) : w)));\n  }\n\n  function openWorkoutAsAluno(workout: WorkoutRow) {\n    const slug = workout.share_slug;\n    if (!slug) {\n      setBanner('Treino sem link (share_slug). Use \"Gerar/Copiar link\".');\n      return;\n    }\n    router.push(`/w/${studentSlug}/${slug}`);\n  }\n\n  // Load student\n  useEffect(() => {\n    if (!studentId) return;\n    loadStudent();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [studentId]);\n\n  // Ensure weeks after student loaded\n  useEffect(() => {\n    if (!student) return;\n    ensureUpcomingWeeks(student);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [student?.id]);\n\n  // Load workouts when week changes\n  useEffect(() => {\n    loadWorkoutsForWeek(selectedWeekId);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedWeekId]);\n\n  const selectedWeek = weeks.find((w) => w.id === selectedWeekId) || null;\n\n  const header = (\n    <div className=\"flex items-start justify-between gap-3\">\n      <div className=\"min-w-0\">\n        <div className=\"text-sm text-slate-600 dark:text-slate-300\">Aluno</div>\n        <div className=\"text-xl font-semibold truncate\">{student?.name ?? '—'}</div>\n        <div className=\"text-sm text-slate-600 dark:text-slate-300 mt-1\">\n          Ritmo P1k: <span className=\"font-semibold\">{formatPace(student?.p1k_sec_per_km ?? null)}</span>\n          {student?.email ? <> · {student.email}</> : null}\n        </div>\n        <div className=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">\n          Links do aluno: <span className=\"font-mono\">/aluno</span> (login) ·{' '}\n          <span className=\"font-mono\">/w/{studentSlug}/&lt;treino&gt;</span>\n        </div>\n      </div>\n\n      <div className=\"shrink-0 flex flex-col items-end gap-2\">\n        <button\n          className=\"px-3 py-2 rounded-lg bg-slate-900 text-white text-sm font-semibold disabled:opacity-50\"\n          disabled={!selectedWeekId}\n          onClick={() => router.push(`/students/${studentId}/workouts/new?weekId=${selectedWeekId}`)}\n        >\n          + Programar treino\n        </button>\n        <button className=\"text-sm underline text-slate-600 dark:text-slate-300\" onClick={() => router.push('/students')}>\n          Voltar\n        </button>\n      </div>\n    </div>\n  );\n\n  return (\n    <main className=\"min-h-screen bg-slate-50 dark:bg-slate-950 p-4\">\n      <div className=\"mx-auto max-w-3xl space-y-4\">\n        <div className=\"rounded-2xl bg-white dark:bg-surface-dark shadow p-4\">{header}</div>\n\n        {banner && (\n          <div className=\"rounded-xl bg-amber-50 dark:bg-amber-900/20 p-3 text-sm text-amber-800 dark:text-amber-200\">\n            {banner}\n          </div>\n        )}\n\n        {loading ? (\n          <div className=\"text-sm text-slate-600 dark:text-slate-300\">Carregando…</div>\n        ) : (\n          <>\n            {/* Seletor de semanas */}\n            <div className=\"rounded-2xl bg-white dark:bg-surface-dark shadow p-4\">\n              <div className=\"flex items-center justify-between gap-3\">\n                <div>\n                  <div className=\"font-semibold\">Planejamento por semana</div>\n                  <div className=\"text-xs text-slate-500 dark:text-slate-400\">\n                    {selectedWeek ? selectedWeek.label || formatRangeBR(selectedWeek.week_start, selectedWeek.week_end) : '—'}\n                  </div>\n                </div>\n              </div>\n\n              {weeks.length === 0 ? (\n                <div className=\"mt-3 text-sm text-slate-600 dark:text-slate-300\">\n                  Semanas ainda não carregadas. Verifique se a tabela <span className=\"font-mono\">weeks</span> existe no Supabase.\n                </div>\n              ) : (\n                <div className=\"mt-3 flex gap-2 overflow-x-auto no-scrollbar\">\n                  {weeks.map((w) => {\n                    const active = w.id === selectedWeekId;\n                    return (\n                      <button\n                        key={w.id}\n                        onClick={() => setSelectedWeekId(w.id)}\n                        className={\n                          'px-3 py-2 rounded-full text-sm font-semibold whitespace-nowrap border ' +\n                          (active\n                            ? 'bg-primary text-slate-900 border-transparent'\n                            : 'bg-white dark:bg-surface-dark border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200')\n                        }\n                      >\n                        {formatRangeBR(w.week_start, w.week_end)}\n                      </button>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n\n            {/* Lista de treinos da semana */}\n            <div className=\"rounded-2xl bg-white dark:bg-surface-dark shadow p-4\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h2 className=\"font-semibold\">Treinos da semana</h2>\n                <div className=\"text-xs text-slate-500 dark:text-slate-400\">Mostrando até 200</div>\n              </div>\n\n              {workouts.length === 0 ? (\n                <div className=\"text-sm text-slate-600 dark:text-slate-300\">\n                  Nenhum treino programado para esta semana ainda.\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {workouts.map((w) => {\n                    const latestExec = latestExecByWorkout[w.id];\n                    const progress =\n                      latestExec?.status === 'completed'\n                        ? `Concluído${latestExec.performed_at ? ` (${formatDateBRLoose(latestExec.performed_at)})` : ''}`\n                        : latestExec?.status === 'in_progress'\n                          ? 'Em andamento'\n                          : '—';\n\n                    const locked = !!w.locked_at || !!latestExec;\n                    const plannedLabel = w.planned_day ? `Ordem ${w.planned_day}` : (w.planned_date ? formatDateBRLoose(w.planned_date) : formatDateBRLoose(w.created_at));\n\n                    return (\n                      <div key={w.id} className=\"rounded-xl border border-slate-200 dark:border-slate-700 p-3 flex flex-col gap-2\">\n                        <div className=\"flex items-start justify-between gap-3\">\n                          <div className=\"min-w-0\">\n                            <div className=\"text-sm text-slate-600 dark:text-slate-300\">\n                              {plannedLabel} · {statusLabel(w.status, (w as any).closed_reason)} · {TEMPLATE_LABEL[w.template_type] ?? w.template_type} ·{' '}\n                              {kmLabel(w.total_km)} km\n                            </div>\n                            <div className=\"font-medium truncate\">{w.title || TEMPLATE_LABEL[w.template_type] || 'Treino'}</div>\n\n                            <div className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">\n                              Execução do aluno: <span className=\"font-semibold\">{progress}</span>\n                              {locked ? ' · Edição bloqueada após início' : ''}\n                            </div>\n                          </div>\n\n                          <div className=\"shrink-0 flex flex-wrap gap-2 justify-end\">\n                            <button\n                              className=\"px-3 py-2 rounded-lg bg-slate-100 dark:bg-slate-800 text-sm font-semibold disabled:opacity-50\"\n                              disabled={locked}\n                              onClick={() => router.push(`/workouts/${w.id}/edit`)}\n                            >\n                              Editar\n                            </button>\n\n                            <button\n                              className=\"px-3 py-2 rounded-lg bg-primary text-slate-900 text-sm font-semibold disabled:opacity-50\"\n                              disabled={w.status === 'archived'}\n                              onClick={() => copyWorkoutLink(w.id)}\n                            >\n                              Gerar/Copiar link\n                            </button>\n\n                            <button\n                              className=\"px-3 py-2 rounded-lg bg-slate-900 text-white text-sm font-semibold disabled:opacity-50\"\n                              disabled={!w.share_slug}\n                              onClick={() => openWorkoutAsAluno(w)}\n                            >\n                              Ver como aluno\n                            </button>\n                          </div>\n                        </div>\n\n                        {w.share_slug ? (\n                          <div className=\"text-xs text-slate-500 dark:text-slate-400\">\n                            Link: <span className=\"font-mono\">/w/{studentSlug}/{w.share_slug}</span>\n                          </div>\n                        ) : (\n                          <div className=\"text-xs text-slate-500 dark:text-slate-400\">Link ainda não gerado (share_slug vazio).</div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </main>\n  );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}