module.exports=[9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},34136,a=>{"use strict";var b=a.i(87924);a.s(["Button",0,({children:a,variant:c="primary",size:d="lg",icon:e,fullWidth:f=!0,className:g="",...h})=>(0,b.jsxs)("button",{className:`flex items-center justify-center gap-2 rounded-full font-bold transition-all active:scale-[0.98] ${{primary:"bg-primary text-background-dark shadow-lg shadow-primary/25 hover:bg-[#25c464]",secondary:"bg-white dark:bg-surface-dark border border-slate-200 dark:border-white/10 text-slate-900 dark:text-white",ghost:"bg-transparent text-slate-600 dark:text-slate-400 hover:bg-black/5 dark:hover:bg-white/5",danger:"bg-red-500 text-white shadow-lg shadow-red-500/20"}[c]} ${{sm:"h-9 px-4 text-xs",md:"h-11 px-6 text-sm",lg:"h-14 px-8 text-lg",xl:"h-16 px-10 text-xl"}[d]} ${f?"w-full":""} ${g}`,...h,children:[e&&(0,b.jsx)("span",{className:"material-symbols-outlined",children:e}),a]})])},69427,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(19818),f=a.i(34136);function g(a){let b=Math.max(0,Math.round(a)),c=Math.floor(b/60),d=String(b%60).padStart(2,"0");return`${c}:${d}`}async function h(a,b){if("u">typeof navigator&&navigator.share)try{await navigator.share({title:"PaceLink",text:a,url:b});return}catch{}try{await navigator.clipboard.writeText(a),alert("Link copiado para a área de transferência.")}catch{prompt("Copie o link abaixo:",b)}}function i(){let a=(0,d.useRouter)(),i=(0,d.useParams)(),j=i?.slug||"",k=(0,c.useMemo)(()=>(0,e.createClient)(),[]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=!0;return async function(){m(!0),o(null);try{if(!j)throw Error("Link inválido.");try{let b=await fetch(`/api/public/workout?slug=${encodeURIComponent(j)}`);if(b.ok){let c=await b.json();if(!a)return;q(c);return}}catch{}try{let{data:b,error:c}=await k.functions.invoke("public-workout",{body:{slug:j}});if(!c&&b){if(!a)return;q(b);return}}catch{}let{data:b,error:c}=await k.from("workouts").select("template_type,total_km,blocks,updated_at,version").eq("share_slug",j).eq("status","ready").single();if(c)throw c;if(!a)return;q({template_type:b.template_type,total_km:Number(b.total_km)||0,blocks:b.blocks||[],updated_at:b.updated_at??null,version:b.version??null})}catch(b){if(!a)return;o(b?.message||"Não foi possível carregar o treino.")}finally{if(!a)return;m(!1)}}(),()=>{a=!1}},[j,k]);let r=(0,c.useMemo)(()=>{var a;let b,c,d,e,f=p?.blocks??[],g="easy_run"===(a=p?.template_type||"")?"Rodagem":"progressive"===a?"Progressivo":"alternated"===a?"Alternado":"Treino",h=function(a){if(!a)return"—";let b=new Date(a),c=String(b.getDate()).padStart(2,"0"),d=String(b.getMonth()+1).padStart(2,"0");return`${c}/${d}`}(p?.updated_at),i=p?.total_km?Number(p.total_km):Math.round(10*f.reduce((a,b)=>a+(Number(b.distance_km)||0),0))/10,j=function(a){let b=0,c=!1;for(let d of a){let a=Number(d.distance_km)||0;if(!a)continue;let e=d.pace_min_sec_per_km??null,f=d.pace_max_sec_per_km??null;e&&f&&(c=!0,b+=(e+f)/2*a/60)}return c?Math.round(b):null}(f);return{title:"Rodagem"===g?"Treino de Rodagem":"Progressivo"===g?"Treino Progressivo":"Alternado"===g?"Treino Alternado":"Treino",subtitle:"—"!==h?`Atualizado em ${h}`:"—",distanceKm:i,duration:j,intensity:(c=(b=f.filter(a=>(a.segment_type??"main")==="main")).some(a=>"forte"===a.intensity),d=b.some(a=>"moderado"===a.intensity),{level:e=c?"forte":d?"moderado":"leve",label:"forte"===e?"ALTO":"moderado"===e?"MÉDIO":"BAIXO",value:"forte"===e?85:"moderado"===e?60:35,description:"forte"===e?"Treino de esforço alto. Mantenha a técnica e evite “explodir” cedo.":"moderado"===e?"Treino de esforço sustentado. Controle a respiração e mantenha constância.":"Treino confortável. Foque em eficiência e consistência."}),blocks:f,type:g,updated:h}},[p]);async function s(){let a=`${window.location.origin}/w/${j}`,b=`Treino PaceLink

${r.title}
Dist\xe2ncia: ${r.distanceKm} km
${r.duration?`Dura\xe7\xe3o estimada: ${r.duration} min
`:""}
Link:
${a}`;await h(b,a)}return(0,b.jsxs)("div",{className:"flex-1 flex flex-col bg-background-light dark:bg-background-dark",children:[(0,b.jsxs)("header",{className:"flex items-center justify-between px-5 pt-6 pb-2",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:(0,b.jsx)("span",{className:"material-symbols-outlined",children:"directions_run"})}),(0,b.jsx)("h2",{className:"font-display font-semibold text-lg",children:"PaceLink"}),(0,b.jsx)("button",{type:"button",className:"w-10 h-10 rounded-full bg-surface-dark/70 hover:bg-surface-dark flex items-center justify-center transition",onClick:s,"aria-label":"Compartilhar",title:"Compartilhar",children:(0,b.jsx)("span",{className:"material-symbols-outlined text-slate-200",children:"ios_share"})})]}),(0,b.jsxs)("main",{className:"flex-1 flex flex-col px-5 pb-8 pt-3",children:[l&&(0,b.jsx)("div",{className:"text-slate-200/80 text-sm",children:"Carregando treino..."}),n&&(0,b.jsxs)("div",{className:"rounded-lg bg-red-50 dark:bg-red-900/20 p-4 text-sm text-red-700 dark:text-red-300",children:[n,(0,b.jsxs)("div",{className:"mt-2 text-xs text-red-200/80",children:["Se este link deveria ser público, verifique se existe uma Edge Function “public-workout” ou se a RLS permite leitura por ",(0,b.jsx)("code",{children:"share_slug"}),"."]})]}),!l&&!n&&p&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("div",{className:"text-xs uppercase tracking-wide text-primary",children:r.type}),(0,b.jsx)("div",{className:"text-xs text-slate-300 mt-1",children:"—"!==r.updated?r.updated:""}),(0,b.jsx)("h1",{className:"mt-2 text-3xl font-extrabold",children:r.title}),(0,b.jsx)("p",{className:"mt-1 text-sm text-slate-300",children:r.subtitle})]}),(0,b.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"rounded-2xl bg-surface-dark/70 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-primary",children:[(0,b.jsx)("span",{className:"material-symbols-outlined",children:"timer"})," Duração"]}),(0,b.jsx)("div",{className:"mt-2 text-3xl font-extrabold",children:r.duration??"—"}),(0,b.jsx)("div",{className:"text-sm text-slate-300",children:r.duration?"min":""})]}),(0,b.jsxs)("div",{className:"rounded-2xl bg-surface-dark/70 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-primary",children:[(0,b.jsx)("span",{className:"material-symbols-outlined",children:"pin_drop"})," Distância"]}),(0,b.jsx)("div",{className:"mt-2 text-3xl font-extrabold",children:r.distanceKm}),(0,b.jsx)("div",{className:"text-sm text-slate-300",children:"km"})]})]}),(0,b.jsxs)("div",{className:"mt-4 rounded-2xl bg-surface-dark/70 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"font-semibold",children:"Nível de intensidade"}),(0,b.jsx)("div",{className:"text-xs uppercase tracking-wide text-primary font-bold",children:r.intensity.label})]}),(0,b.jsx)("div",{className:"mt-3 h-2 rounded-full bg-black/30 overflow-hidden",children:(0,b.jsx)("div",{className:"h-2 bg-primary rounded-full",style:{width:`${r.intensity.value}%`}})}),(0,b.jsx)("p",{className:"mt-3 text-sm text-slate-300",children:r.intensity.description})]}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Estrutura do treino"}),(0,b.jsx)("div",{className:"mt-3 space-y-3",children:r.blocks.map((a,c)=>{let d=a.pace_min_sec_per_km&&a.pace_max_sec_per_km?`${g(a.pace_min_sec_per_km)}–${g(a.pace_max_sec_per_km)} min/km`:"livre"===a.intensity?"Ritmo livre":"Ritmo guiado";return(0,b.jsxs)("div",{className:"rounded-2xl bg-surface-dark/70 p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:a.label}),(0,b.jsxs)("div",{className:"mt-1 text-sm text-slate-300",children:[Number(a.distance_km)," km • ",d]})]}),(0,b.jsx)("div",{className:"text-xs uppercase tracking-wide text-primary font-bold",children:"livre"===a.intensity?"LIVRE":"forte"===a.intensity?"FORTE":"moderado"===a.intensity?"MODERADO":"LEVE"})]}),a.hint_text&&(0,b.jsx)("div",{className:"mt-2 text-sm text-slate-300",children:a.hint_text})]},`${c}-${a.label}`)})})]}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsxs)(f.Button,{fullWidth:!0,onClick:()=>a.push(`/w/${j}/run`),children:[(0,b.jsx)("span",{className:"material-symbols-outlined align-middle mr-2",children:"play_arrow"}),"Iniciar execução"]}),(0,b.jsx)("div",{className:"mt-3 text-xs text-slate-400",children:"Dica: mantenha a tela ligada durante a execução."})]})]})]})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c42d09b8._.js.map